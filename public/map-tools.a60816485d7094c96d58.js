/*! For license information please see map-tools.a60816485d7094c96d58.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{128:function(t,e,i){},230:function(t,e,i){(function(t){i.d(e,"a",(function(){return b}));i(84),i(87);var r=i(78),s=i(168),n=(i(144),i(128),i(18)),a=i(5),o=i(23),d=i(88),h=i(100),l=i.n(h),c=i(104),u=i.n(c),p=i(105),_=i.n(p);function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}l.a.extend(u.a),l.a.extend(_.a),l.a.locale("en-gb");class b{constructor(){m(this,"_height",void 0),m(this,"_width",void 0),m(this,"_windArrowWidth",void 0),m(this,"_baseName",void 0),m(this,"_baseId",void 0),m(this,"_buttonId",void 0),m(this,"_modalId",void 0),m(this,"_formId",void 0),m(this,"_sliderId",void 0),m(this,"_timeGroupId",void 0),m(this,"_timeInputId",void 0),m(this,"_svg",void 0),this._height=300,this._width=260,this._windArrowWidth=3,this._baseName="Predict wind",this._baseId="predict-wind",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._formId="form-"+this._baseId,this._sliderId="slider-"+this._baseId,this._timeGroupId="input-group-"+this._baseId,this._timeInputId="input-"+this._baseId,this._setupSvg(),this._setupArrow(),this._setupListener()}_setupSvg(){this._svg=Object(r.a)("#wind svg")}_setupArrow(){const t=this._windArrowWidth,e=2*this._windArrowWidth;Object(r.a)("#na-svg defs").append("marker").attr("id","wind-arrow").attr("viewBox",`0 -${t} ${e} ${e}`).attr("refX",t).attr("refY",0).attr("markerWidth",t).attr("markerHeight",t).attr("orient","auto").append("path").attr("d",`M0,-${t}L${e},0L0,${t}`).attr("class","wind-predict-arrow-head")}_navbarClick(){Object(n.b)("Menu",this._baseName),this._windSelected()}_setupListener(){var t;null===(t=document.querySelector("#"+this._buttonId))||void 0===t||t.addEventListener("click",(()=>this._navbarClick()))}_setupWindInput(){const e=t.fn.roundSlider.prototype._getTooltipPos;t.fn.roundSlider.prototype._getTooltipPos=function(){this.tooltip.is(":visible")||t("body").append(this.tooltip);const i=e.call(this);return this.container.append(this.tooltip),i},window.tooltip=t=>`${Object(d.e)(t.value)}<br>${String(t.value)}°`,t("#"+this._sliderId).roundSlider({sliderType:"default",handleSize:"+1",startAngle:90,width:20,radius:110,min:0,max:359,step:360/o.b.length,editableTooltip:!1,tooltipFormat:"tooltip",create(){this.control.css("display","block")}})}_injectModal(){Object(a.m)({id:this._modalId,title:this._baseName,size:"modal-sm"});const t=Object(r.a)(`#${this._modalId} .modal-body`).append("form").attr("id",this._formId),e=t.append("div").attr("class","form-group").append("div").classed("alert alert-primary",!0);e.append("label").attr("for",this._sliderId).text("Current in-game wind"),e.append("div").attr("id",this._sliderId).attr("class","rslider");const i=t.append("div").attr("class","form-group").append("div").attr("class","alert alert-primary");i.append("label").attr("for",this._timeInputId).text("Predict time (server time)");i.append("div").classed("input-group date",!0).attr("id",this._timeGroupId).attr("data-target-input","nearest").append("input").attr("class","form-control").attr("type","time").attr("id",this._timeInputId).attr("value",l.a.utc().format("HH:mm")).attr("data-target","#"+this._timeGroupId).attr("aria-label",this._timeGroupId).attr("required","")}_initModal(){this._injectModal(),this._setupWindInput()}_windSelected(){document.querySelector("#"+this._modalId)||this._initModal(),t("#"+this._modalId).modal("show").one("hidden.bs.modal",(()=>{this._useUserInput()}))}_useUserInput(){const e=Object(d.j)(this._sliderId),i=t("#"+this._timeInputId).val().trim();this._predictWind(e,i)}_predictWind(t,e){const i="H.mm";let r;const s=/(\d+)[\s.:](\d+)/.exec(e),n=Number.parseInt(s[1],10),d=Number.parseInt(s[2],10);r=Number.isNaN(Number(t))?Object(o.c)(String(t)):Number(t);const h=l()().utc().second(0).millisecond(0),c=l()(h).hour(n).minute(d);c.isBefore(h)&&c.add(1,"day");const u=c.diff(h,"second"),p=360+(r-a.j*u)%360;this._printPredictedWind(p,c.format(i),Object(o.m)(t),h.format(i))}_printCompass(t){const e=Object(s.a)(),i=Math.min(this._height/1.4,this._width/1.4)/2,r=this._width/2,n=this._height/2.8,a=Object(o.n)(t),h=.6*i,l=h*Math.cos(a),c=h*Math.sin(a),u=[[Math.round(r+l),Math.round(n+c)],[Math.round(r-l),Math.round(n-c)]];this._svg.attr("height",this._height).attr("width",this._width);const p=this._svg.append("svg").attr("class","compass").attr("x",r).attr("y",n);Object(d.k)({element:p,radius:i}),this._svg.append("path").datum(u).attr("d",e).attr("marker-end","url(#wind-arrow)")}_printText(t,e,i,r){var s,n;const a=Object(o.m)(t),h=Number.parseInt(window.getComputedStyle(document.querySelector("#wind")).getPropertyValue("line-height"),10),l=this._svg.append("svg"),c=l.append("text").attr("x","50%").attr("y","33%").html(`From ${Object(d.f)(a,!0)} at ${e}`),u=l.append("text").attr("x","50%").attr("y","66%").attr("class","text-light-separation").html(`Currently at ${r} from ${Object(d.f)(i,!0)}`),p=null===(s=c.node())||void 0===s?void 0:s.getBoundingClientRect(),_=null===(n=u.node())||void 0===n?void 0:n.getBoundingClientRect(),m=2*Math.max(Number(null==p?void 0:p.height),Number(null==_?void 0:_.height))+h,b=Math.max(Number(null==p?void 0:p.width),Number(null==_?void 0:_.width))+h;l.attr("x",(this._width-b)/2).attr("y","72%").attr("height",m).attr("width",b)}_addBackground(){this._svg.insert("rect",":first-child").attr("x",0).attr("y",0).attr("height",this._height).attr("width",this._width)}_printPredictedWind(t,e,i,r){this.clearMap(),this._svg.classed("d-none",!1),this._printCompass(t),this._printText(t,e,i,r),this._addBackground()}setPosition(t,e){this._svg.style("margin-left",e+"px").style("margin-top",t+"px")}clearMap(){this._svg.selectAll("*").remove(),this._svg.classed("d-none",!0)}}}).call(this,i(22))},231:function(t,e,i){(function(t){i.d(e,"a",(function(){return v}));i(84),i(87),i(125);var r=i(78),s=i(168),n=(i(144),i(128),i(18)),a=i(5),o=i(23),d=i(88),h=i(100),l=i.n(h),c=i(104),u=i.n(c),p=i(105),_=i.n(p),m=i(24);function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}l.a.extend(u.a),l.a.extend(_.a);class v{constructor(){b(this,"_line",void 0),b(this,"_windPath",void 0),b(this,"_windArrowWidth",void 0),b(this,"_intervalSeconds",void 0),b(this,"_baseName",void 0),b(this,"_baseId",void 0),b(this,"_buttonId",void 0),b(this,"_modalId",void 0),b(this,"_formId",void 0),b(this,"_sliderId",void 0),b(this,"_cookieExpire",void 0),b(this,"_cookieWindDegrees",void 0),b(this,"_cookieTime",void 0),b(this,"_currentWindDegrees",void 0),b(this,"_height",void 0),b(this,"_yCompass",void 0),b(this,"_width",void 0),b(this,"_xCompass",void 0),b(this,"_compassRadius",void 0),b(this,"_length",void 0),b(this,"_intervalId",void 0),b(this,"_svg",void 0),b(this,"_div",void 0),this._line=Object(s.a)().x((t=>t[0])).y((t=>t[1])),this._windArrowWidth=4,this._intervalSeconds=40,this._baseName="In-game wind",this._baseId="ingame-wind",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._formId="form-"+this._baseId,this._sliderId="slider-"+this._baseId,this._cookieExpire=this._getExpire(),this._cookieWindDegrees=new m.a({id:this._baseId+"-degrees",expire:this._cookieExpire}),this._cookieTime=new m.a({id:this._baseId+"-time"}),this._currentWindDegrees=this._getCurrentWindCookie(),this._setupListener(),this._currentWindDegrees&&this._initShowCurrentWind()}_getHeight(){const t=document.querySelector("#port-summary .block");if(t){const{height:e,top:i}=t.getBoundingClientRect();return e-i-Number.parseFloat(window.getComputedStyle(t).getPropertyValue("padding-top"))-Number.parseFloat(window.getComputedStyle(t).getPropertyValue("padding-bottom"))}return 0}_getCurrentWindCookie(){const t=Number(this._cookieWindDegrees.get());if(t){const e=Number(this._cookieTime.get()),i=Math.round((Date.now()-e)/1e3);this._currentWindDegrees=360+Math.floor(t-a.j*i)%360}return t}_getExpire(){const t=l.a.utc();let e=l()().utc().hour(10).minute(0).second(0);return t.hour()>=e.hour()&&(e=e.add(1,"day")),e.local().toDate()}_storeCurrentWindCookie(){this._cookieWindDegrees.set(String(this._currentWindDegrees)),this._cookieTime.set(String(Date.now()))}_setupSvg(){const t=Object(r.a)("#port-summary");t.classed("port-summary-no-wind",!1).classed("port-summary-wind",!0),this._div=t.insert("div",":first-child").attr("id",this._baseId).attr("class","block p-0"),this._svg=this._div.append("svg").attr("class","ingame-wind small")}_navbarClick(){Object(n.b)("Menu",this._baseName),this._windRoseSelected()}_setupListener(){var t;null===(t=document.querySelector("#"+this._buttonId))||void 0===t||t.addEventListener("click",(()=>this._navbarClick()))}_setupWindInput(){const e=t.fn.roundSlider.prototype._getTooltipPos;t.fn.roundSlider.prototype._getTooltipPos=function(){this.tooltip.is(":visible")||t("body").append(this.tooltip);const i=e.call(this);return this.container.append(this.tooltip),i},window.tooltip=t=>`${Object(d.e)(t.value)}<br>${String(t.value)}°`,t("#"+this._sliderId).roundSlider({sliderType:"default",handleSize:"+1",startAngle:90,width:20,radius:110,min:0,max:359,step:360/o.b.length,editableTooltip:!1,tooltipFormat:"tooltip",create(){this.control.css("display","block")}})}_injectModal(){Object(a.m)({id:this._modalId,title:this._baseName,size:"modal-sm"});const t=Object(r.a)(`#${this._modalId} .modal-body`).append("form").attr("id",this._formId).append("div").attr("class","form-group").append("div").attr("class","alert alert-primary");t.append("label").attr("for",this._sliderId).text("Current in-game wind"),t.append("div").attr("id",this._sliderId).attr("class","rslider")}_initModal(){this._injectModal(),this._setupWindInput()}_windRoseSelected(){document.querySelector("#"+this._modalId)||this._initModal(),t("#"+this._modalId).modal("show").one("hidden.bs.modal",(()=>{this._useUserInput()}))}_windChange(){this._currentWindDegrees=360+(this._currentWindDegrees-a.j*this._intervalSeconds)%360,this._updateWindDirection()}_useUserInput(){this._currentWindDegrees=Object(d.j)(this._sliderId),this._windPath?this._updateWindDirection():this._initShowCurrentWind()}_initShowCurrentWind(){this._setupSvg(),this._initPrintCompassRose(),this._updateWindDirection(),this._intervalId=window.setInterval((()=>{this._windChange()}),1e3*this._intervalSeconds)}_updateWindDirection(){const t=Object(o.n)(this._currentWindDegrees),e=this._length*Math.cos(t),i=this._length*Math.sin(t),r=[[Math.round(this._xCompass+e),Math.round(this._yCompass+i)],[Math.round(this._xCompass-e),Math.round(this._yCompass-i)]];this._windPath&&(this._windPath.datum(r).attr("d",this._line),this._storeCurrentWindCookie())}_initPrintCompassRose(){this._height=this._getHeight(),this._yCompass=this._height/2,this._width=this._height,this._xCompass=this._width/2,this._compassRadius=Math.min(this._height,this._width)/2,this._length=.6*this._compassRadius,this._svg.attr("height",this._height).attr("width",this._width);const t=this._svg.append("svg").attr("class","compass").attr("x",this._xCompass).attr("y",this._yCompass);Object(d.l)({element:t,radius:this._compassRadius}),this._windPath=this._svg.append("path").attr("marker-end","url(#wind-arrow)")}clearMap(){window.clearInterval(this._intervalId),this._div&&this._div.remove(),this._windPath=void 0,this._cookieWindDegrees.remove()}}}).call(this,i(22))},83:function(t,e,i){i.r(e),i.d(e,"init",(function(){return n}));var r=i(230),s=i(231);const n=()=>{new r.a,new s.a}},88:function(t,e,i){(function(t){i.d(e,"e",(function(){return d})),i.d(e,"f",(function(){return h})),i.d(e,"j",(function(){return l})),i.d(e,"m",(function(){return c})),i.d(e,"a",(function(){return u})),i.d(e,"k",(function(){return p})),i.d(e,"l",(function(){return _})),i.d(e,"d",(function(){return m})),i.d(e,"c",(function(){return b})),i.d(e,"b",(function(){return v})),i.d(e,"g",(function(){return g})),i.d(e,"i",(function(){return f})),i.d(e,"h",(function(){return w}));var r=i(137),s=i(5),n=i(23);function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}const d=(t,e=!1)=>{let i;return i=Number.isNaN(Number(t))?t:Object(n.m)(Number(t)),`<${e?"tspan":"span"} class="caps">${i}</${e?"tspan":"span"}>`},h=(t,e=!1)=>{let i,r;return Number.isNaN(Number(t))?(i=t,r=Object(n.c)(i)%n.j):(r=Number(t),i=Object(n.m)(r)),`<${e?"tspan":"span"} class="caps">${i}</${e?"tspan":"span"}> (${r}°)`},l=e=>{const i=Object(n.m)(t("#"+e).roundSlider("getValue"));let r;return r=Number.isNaN(Number(i))?Object(n.c)(i):Number(i),r},c=(t,e)=>{let i=Math.atan2(e.y-t.y,e.x-t.x);i-=Math.PI/2;let r=Object(n.t)(i);return r<0&&(r+=n.j),r},u=(t,e,i=!0)=>{if(e<2)return[t];const r=t.length,s=[];let n,a=0;if(r%e==0)for(n=Math.floor(r/e);a<r;)s.push(t.slice(a,a+=n));else if(i)for(;a<r;)n=Math.ceil((r-a)/e--),s.push(t.slice(a,a+=n));else{for(e-=1,n=Math.floor(r/e),r%n==0&&(n-=1);a<n*e;)s.push(t.slice(a,a+=n));s.push(t.slice(n*e))}return s},p=({element:t,radius:e})=>{const i=s.n,o=n.j/i,d=Math.round(.8*e),h=a(new Array(i)).map(((t,e)=>Object(n.m)(e*o))),l=Object(r.a)().range([0-o/2,n.j-o/2]).domain(h).align(0);t.append("circle").attr("r",d).style("stroke-width","3px");const c=t.append("text"),u=t.selectAll("g").data(h).join((t=>t.append("g").attr("transform",(t=>{var e;return`rotate(${Math.round((null!==(e=l(t))&&void 0!==e?e:0)+l.bandwidth()/2-n.l)})translate(${d},0)`}))));u.filter(((t,e)=>e%3!=0)).append("line").attr("x2",9),u.filter(((t,e)=>e%3==0)).append("text").attr("transform",(t=>{var e,i,r,s,n;let a,o=Math.round((null!==(e=l(t))&&void 0!==e?e:0)+l.bandwidth()/2);c.text(t);const d=null!==(i=null===(r=c.node())||void 0===r?void 0:r.getBBox().height)&&void 0!==i?i:0,h=null!==(s=null===(n=c.node())||void 0===n?void 0:n.getBBox().width)&&void 0!==s?s:0;return o>=0&&o<=45||315===o?(o=90,a="0,-"+d/2):90===o?(o=0,a=h/2+3+",0"):270===o?(o=180,a=`-${h/2+3},0`):(o=-90,a="0,"+(d/2+3+2)),`rotate(${o})translate(${a})`})).text((t=>t)),c.remove()},_=({element:t,radius:e})=>{const i=s.n,o=n.j/i,d=Math.round(.8*e),h=a(new Array(i)).map(((t,e)=>Object(n.m)(e*o))),l=Object(r.a)().range([0-o/2,n.j-o/2]).domain(h).align(0);t.append("circle").attr("r",d).style("stroke-width","1.5px");t.selectAll("line").data(h).join((t=>t.append("line").attr("x2",((t,e)=>e%3==0?e%6==0?6:4:2)).attr("transform",(t=>{var e;return`rotate(${Math.round((null!==(e=l(t))&&void 0!==e?e:0)+l.bandwidth()/2)})translate(${d},0)`}))))},m=t=>`<span class="caps">${t}</span>`,b=(t,e)=>{navigator.clipboard||((t,e)=>{var i,r;if(!(null===(i=(r=document).queryCommandSupported)||void 0===i?void 0:i.call(r,"copy")))return console.error(`Insufficient rights to copy ${t} to clipboard`),!1;{const i=document.createElement("input");i.type="text",i.value=t,i.style.position="absolute",i.style.left="-1000px",i.style.top="-1000px",e.append(i),i.select();try{document.execCommand("copy")}catch(t){return console.error("Copy to clipboard failed.",t),!1}finally{i.remove()}}})(t,e),(async t=>{navigator.clipboard.writeText(t).then((()=>!0)).catch((e=>(console.error(`Cannot copy ${t} to clipboard`,e),!1)))})(t)},v=(t,e,i)=>{if(Number.isFinite(t)&&Number.isFinite(e)){const r=new URL(window.location.href);r.searchParams.set("x",String(t)),r.searchParams.set("z",String(e)),b(r.href,i)}},g=(t,e,i)=>`M${t-i},${e}a${i},${i} 0 10${2*i},0a${i},${i} 0 10${2*-i},0`,f=(t,e,i)=>`M${t-i/2},${e-i/2}h${i}v${i}h${-i}z`,w=(t,e,i)=>`M${t},${e}v${i}`}).call(this,i(22))}}]);