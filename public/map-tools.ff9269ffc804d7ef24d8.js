/*! For license information please see map-tools.ff9269ffc804d7ef24d8.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"8+NV":function(t,e,i){(function(t){i.d(e,"a",(function(){return g}));i("WUlJ"),i("fCtr"),i("ry7D");var s=i("AKWm"),r=i("+ugm"),n=(i("b6Yt"),i("Iohx"),i("pOjD")),d=i("Q4du"),a=i("otg8"),o=i("dNoP"),h=i("Wgwc"),l=i.n(h),u=i("+QaA"),c=i.n(u),p=i("Ds8A"),_=i.n(p),m=i("m+OL");function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}l.a.extend(c.a),l.a.extend(_.a);class g{constructor(){v(this,"_line",void 0),v(this,"_windPath",void 0),v(this,"_windArrowWidth",void 0),v(this,"_intervalSeconds",void 0),v(this,"_baseName",void 0),v(this,"_baseId",void 0),v(this,"_buttonId",void 0),v(this,"_modalId",void 0),v(this,"_formId",void 0),v(this,"_sliderId",void 0),v(this,"_cookieExpire",void 0),v(this,"_cookieWindDegrees",void 0),v(this,"_cookieTime",void 0),v(this,"_currentWindDegrees",void 0),v(this,"_height",void 0),v(this,"_yCompass",void 0),v(this,"_width",void 0),v(this,"_xCompass",void 0),v(this,"_compassRadius",void 0),v(this,"_length",void 0),v(this,"_intervalId",void 0),v(this,"_svg",void 0),v(this,"_div",void 0),this._line=Object(r.a)().x(t=>t[0]).y(t=>t[1]),this._windArrowWidth=4,this._intervalSeconds=40,this._baseName="In-game wind",this._baseId="ingame-wind",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._formId="form-"+this._baseId,this._sliderId="slider-"+this._baseId,this._cookieExpire=this._getExpire(),this._cookieWindDegrees=new m.a({id:this._baseId+"-degrees",expire:this._cookieExpire}),this._cookieTime=new m.a({id:this._baseId+"-time"}),this._currentWindDegrees=this._getCurrentWindCookie(),this._setupListener(),this._currentWindDegrees&&this._initShowCurrentWind()}_getHeight(){const t=document.querySelector("#port-summary .block");if(t){const{height:e,top:i}=t.getBoundingClientRect();return e-i-Number.parseFloat(window.getComputedStyle(t).getPropertyValue("padding-top"))-Number.parseFloat(window.getComputedStyle(t).getPropertyValue("padding-bottom"))}return 0}_getCurrentWindCookie(){const t=Number(this._cookieWindDegrees.get());if(t){const e=Number(this._cookieTime.get()),i=Math.round((Date.now()-e)/1e3);this._currentWindDegrees=360+Math.floor(t-d.j*i)%360}return t}_getExpire(){const t=l.a.utc();let e=l()().utc().hour(10).minute(0).second(0);return t.hour()>=e.hour()&&(e=e.add(1,"day")),e.local().toDate()}_storeCurrentWindCookie(){this._cookieWindDegrees.set(String(this._currentWindDegrees)),this._cookieTime.set(String(Date.now()))}_setupSvg(){const t=Object(s.a)("#port-summary");t.classed("port-summary-no-wind",!1).classed("port-summary-wind",!0),this._div=t.insert("div",":first-child").attr("id",this._baseId).attr("class","block p-0"),this._svg=this._div.append("svg").attr("class","ingame-wind small")}_navbarClick(){Object(n.b)("Menu",this._baseName),this._windRoseSelected()}_setupListener(){var t;null===(t=document.querySelector("#"+this._buttonId))||void 0===t||t.addEventListener("click",()=>this._navbarClick())}_setupWindInput(){const e=t.fn.roundSlider.prototype._getTooltipPos;t.fn.roundSlider.prototype._getTooltipPos=function(){this.tooltip.is(":visible")||t("body").append(this.tooltip);const i=e.call(this);return this.container.append(this.tooltip),i},window.tooltip=t=>`${Object(o.e)(t.value)}<br>${String(t.value)}°`,t("#"+this._sliderId).roundSlider({sliderType:"default",handleSize:"+1",startAngle:90,width:20,radius:110,min:0,max:359,step:360/a.b.length,editableTooltip:!1,tooltipFormat:"tooltip",create(){this.control.css("display","block")}})}_injectModal(){Object(d.l)({id:this._modalId,title:this._baseName,size:"modal-sm"});const t=Object(s.a)(`#${this._modalId} .modal-body`).append("form").attr("id",this._formId).append("div").attr("class","form-group").append("div").attr("class","alert alert-primary");t.append("label").attr("for",this._sliderId).text("Current in-game wind"),t.append("div").attr("id",this._sliderId).attr("class","rslider")}_initModal(){this._injectModal(),this._setupWindInput()}_windRoseSelected(){document.querySelector("#"+this._modalId)||this._initModal(),t("#"+this._modalId).modal("show").one("hidden.bs.modal",()=>{this._useUserInput()})}_windChange(){this._currentWindDegrees=360+(this._currentWindDegrees-d.j*this._intervalSeconds)%360,this._updateWindDirection()}_useUserInput(){this._currentWindDegrees=Object(o.j)(this._sliderId),this._windPath?this._updateWindDirection():this._initShowCurrentWind()}_initShowCurrentWind(){this._setupSvg(),this._initPrintCompassRose(),this._updateWindDirection(),this._intervalId=window.setInterval(()=>{this._windChange()},1e3*this._intervalSeconds)}_updateWindDirection(){const t=Object(a.n)(this._currentWindDegrees),e=this._length*Math.cos(t),i=this._length*Math.sin(t),s=[[Math.round(this._xCompass+e),Math.round(this._yCompass+i)],[Math.round(this._xCompass-e),Math.round(this._yCompass-i)]];this._windPath&&(this._windPath.datum(s).attr("d",this._line),this._storeCurrentWindCookie())}_initPrintCompassRose(){this._height=this._getHeight(),this._yCompass=this._height/2,this._width=this._height,this._xCompass=this._width/2,this._compassRadius=Math.min(this._height,this._width)/2,this._length=.6*this._compassRadius,this._svg.attr("height",this._height).attr("width",this._width);const t=this._svg.append("svg").attr("class","compass").attr("x",this._xCompass).attr("y",this._yCompass);Object(o.l)({element:t,radius:this._compassRadius}),this._windPath=this._svg.append("path").attr("marker-end","url(#wind-arrow)")}clearMap(){window.clearInterval(this._intervalId),this._div&&this._div.remove(),this._windPath=void 0,this._cookieWindDegrees.remove()}}}).call(this,i("xeH2"))},"AT7/":function(t,e,i){},Iohx:function(t,e,i){},dNoP:function(t,e,i){(function(t){i.d(e,"e",(function(){return d})),i.d(e,"f",(function(){return a})),i.d(e,"j",(function(){return o})),i.d(e,"m",(function(){return h})),i.d(e,"a",(function(){return l})),i.d(e,"k",(function(){return u})),i.d(e,"l",(function(){return c})),i.d(e,"d",(function(){return p})),i.d(e,"c",(function(){return _})),i.d(e,"b",(function(){return m})),i.d(e,"g",(function(){return v})),i.d(e,"i",(function(){return g})),i.d(e,"h",(function(){return b}));var s=i("sCaM"),r=i("Q4du"),n=i("otg8");const d=(t,e=!1)=>{let i;return i=Number.isNaN(Number(t))?t:Object(n.m)(Number(t)),`<${e?"tspan":"span"} class="caps">${i}</${e?"tspan":"span"}>`},a=(t,e=!1)=>{let i,s;return Number.isNaN(Number(t))?(i=t,s=Object(n.c)(i)%n.j):(s=Number(t),i=Object(n.m)(s)),`<${e?"tspan":"span"} class="caps">${i}</${e?"tspan":"span"}> (${s}°)`},o=e=>{const i=Object(n.m)(t("#"+e).roundSlider("getValue"));let s;return s=Number.isNaN(Number(i))?Object(n.c)(i):Number(i),s},h=(t,e)=>{let i=Math.atan2(e.y-t.y,e.x-t.x);i-=Math.PI/2;let s=Object(n.t)(i);return s<0&&(s+=n.j),s},l=(t,e,i=!0)=>{if(e<2)return[t];const s=t.length,r=[];let n,d=0;if(s%e==0)for(n=Math.floor(s/e);d<s;)r.push(t.slice(d,d+=n));else if(i)for(;d<s;)n=Math.ceil((s-d)/e--),r.push(t.slice(d,d+=n));else{for(e-=1,n=Math.floor(s/e),s%n==0&&(n-=1);d<n*e;)r.push(t.slice(d,d+=n));r.push(t.slice(n*e))}return r},u=({element:t,radius:e})=>{const i=r.m,d=n.j/i,a=Math.round(.8*e),o=new Array(i).fill(void 0).map((t,e)=>Object(n.m)(e*d)),h=Object(s.a)().range([0-d/2,n.j-d/2]).domain(o).align(0);t.append("circle").attr("r",a).style("stroke-width","3px");const l=t.append("text"),u=t.selectAll("g").data(o).join(t=>t.append("g").attr("transform",t=>{var e;return`rotate(${Math.round((null!==(e=h(t))&&void 0!==e?e:0)+h.bandwidth()/2-n.l)})translate(${a},0)`}));u.filter((t,e)=>e%3!=0).append("line").attr("x2",9),u.filter((t,e)=>e%3==0).append("text").attr("transform",t=>{var e,i,s,r,n;let d,a=Math.round((null!==(e=h(t))&&void 0!==e?e:0)+h.bandwidth()/2);l.text(t);const o=null!==(i=null===(s=l.node())||void 0===s?void 0:s.getBBox().height)&&void 0!==i?i:0,u=null!==(r=null===(n=l.node())||void 0===n?void 0:n.getBBox().width)&&void 0!==r?r:0;return a>=0&&a<=45||315===a?(a=90,d="0,-"+o/2):90===a?(a=0,d=u/2+3+",0"):270===a?(a=180,d=`-${u/2+3},0`):(a=-90,d="0,"+(o/2+3+2)),`rotate(${a})translate(${d})`}).text(t=>t),l.remove()},c=({element:t,radius:e})=>{const i=r.m,d=n.j/i,a=Math.round(.8*e),o=new Array(i).fill(void 0).map((t,e)=>Object(n.m)(e*d)),h=Object(s.a)().range([0-d/2,n.j-d/2]).domain(o).align(0);t.append("circle").attr("r",a).style("stroke-width","1.5px");t.selectAll("line").data(o).join(t=>t.append("line").attr("x2",(t,e)=>e%3==0?e%6==0?6:4:2).attr("transform",t=>{var e;return`rotate(${Math.round((null!==(e=h(t))&&void 0!==e?e:0)+h.bandwidth()/2)})translate(${a},0)`}))},p=t=>`<span class="caps">${t}</span>`,_=(t,e)=>{navigator.clipboard||((t,e)=>{var i,s;if(!(null===(i=(s=document).queryCommandSupported)||void 0===i?void 0:i.call(s,"copy")))return console.error(`Insufficient rights to copy ${t} to clipboard`),!1;{const i=document.createElement("input");i.type="text",i.value=t,i.style.position="absolute",i.style.left="-1000px",i.style.top="-1000px",e.append(i),i.select();try{document.execCommand("copy")}catch(t){return console.error("Copy to clipboard failed.",t),!1}finally{i.remove()}}})(t,e),(async t=>{navigator.clipboard.writeText(t).then(()=>!0).catch(e=>(console.error(`Cannot copy ${t} to clipboard`,e),!1))})(t)},m=(t,e,i)=>{if(Number.isFinite(t)&&Number.isFinite(e)){const s=new URL(window.location.href);s.searchParams.set("x",String(t)),s.searchParams.set("z",String(e)),_(s.href,i)}},v=(t,e,i)=>`M${t},${e} m${-i},0 a${i},${i} 0,1,0 ${2*i},0 a${i},${i} 0,1,0 ${2*-i},0`,g=(t,e,i)=>`M${t-i/2},${e-i/2}h${i}v${i}h${-i}z`,b=(t,e,i)=>`M${t},${e}v${i}`}).call(this,i("xeH2"))},sL5V:function(t,e,i){i.r(e),i.d(e,"init",(function(){return n}));var s=i("uvNv"),r=i("8+NV");i("AT7/");const n=()=>{new s.a,new r.a}},uvNv:function(t,e,i){(function(t){i.d(e,"a",(function(){return v}));i("WUlJ"),i("fCtr");var s=i("AKWm"),r=i("+ugm"),n=(i("b6Yt"),i("pOjD")),d=i("Q4du"),a=i("otg8"),o=i("dNoP"),h=i("Wgwc"),l=i.n(h),u=i("+QaA"),c=i.n(u),p=i("Ds8A"),_=i.n(p);function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}l.a.extend(c.a),l.a.extend(_.a),l.a.locale("en-gb");class v{constructor(){m(this,"_height",void 0),m(this,"_width",void 0),m(this,"_windArrowWidth",void 0),m(this,"_baseName",void 0),m(this,"_baseId",void 0),m(this,"_buttonId",void 0),m(this,"_modalId",void 0),m(this,"_formId",void 0),m(this,"_sliderId",void 0),m(this,"_timeGroupId",void 0),m(this,"_timeInputId",void 0),m(this,"_svg",void 0),this._height=300,this._width=260,this._windArrowWidth=3,this._baseName="Predict wind",this._baseId="predict-wind",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._formId="form-"+this._baseId,this._sliderId="slider-"+this._baseId,this._timeGroupId="input-group-"+this._baseId,this._timeInputId="input-"+this._baseId,this._setupSvg(),this._setupArrow(),this._setupListener()}_setupSvg(){this._svg=Object(s.a)("#wind svg")}_setupArrow(){const t=this._windArrowWidth,e=2*this._windArrowWidth;Object(s.a)("#na-svg defs").append("marker").attr("id","wind-arrow").attr("viewBox",`0 -${t} ${e} ${e}`).attr("refX",t).attr("refY",0).attr("markerWidth",t).attr("markerHeight",t).attr("orient","auto").append("path").attr("d",`M0,-${t}L${e},0L0,${t}`).attr("class","wind-predict-arrow-head")}_navbarClick(){Object(n.b)("Menu",this._baseName),this._windSelected()}_setupListener(){var t;null===(t=document.querySelector("#"+this._buttonId))||void 0===t||t.addEventListener("click",()=>this._navbarClick())}_setupWindInput(){const e=t.fn.roundSlider.prototype._getTooltipPos;t.fn.roundSlider.prototype._getTooltipPos=function(){this.tooltip.is(":visible")||t("body").append(this.tooltip);const i=e.call(this);return this.container.append(this.tooltip),i},window.tooltip=t=>`${Object(o.e)(t.value)}<br>${String(t.value)}°`,t("#"+this._sliderId).roundSlider({sliderType:"default",handleSize:"+1",startAngle:90,width:20,radius:110,min:0,max:359,step:360/a.b.length,editableTooltip:!1,tooltipFormat:"tooltip",create(){this.control.css("display","block")}})}_injectModal(){Object(d.l)({id:this._modalId,title:this._baseName,size:"modal-sm"});const t=Object(s.a)(`#${this._modalId} .modal-body`).append("form").attr("id",this._formId),e=t.append("div").attr("class","form-group").append("div").classed("alert alert-primary",!0);e.append("label").attr("for",this._sliderId).text("Current in-game wind"),e.append("div").attr("id",this._sliderId).attr("class","rslider");const i=t.append("div").attr("class","form-group").append("div").attr("class","alert alert-primary");i.append("label").attr("for",this._timeInputId).text("Predict time (server time)");i.append("div").classed("input-group date",!0).attr("id",this._timeGroupId).attr("data-target-input","nearest").append("input").attr("class","form-control").attr("type","time").attr("id",this._timeInputId).attr("value",l.a.utc().format("HH:mm")).attr("data-target","#"+this._timeGroupId).attr("aria-label",this._timeGroupId).attr("required","")}_initModal(){this._injectModal(),this._setupWindInput()}_windSelected(){document.querySelector("#"+this._modalId)||this._initModal(),t("#"+this._modalId).modal("show").one("hidden.bs.modal",()=>{this._useUserInput()})}_useUserInput(){const e=Object(o.j)(this._sliderId),i=t("#"+this._timeInputId).val().trim();this._predictWind(e,i)}_predictWind(t,e){let i;const s=/(\d+)[\s.:](\d+)/.exec(e),r=Number.parseInt(s[1],10),n=Number.parseInt(s[2],10);i=Number.isNaN(Number(t))?Object(a.c)(String(t)):Number(t);const o=l()().utc().second(0).millisecond(0),h=l()(o).hour(r).minute(n);h.isBefore(o)&&h.add(1,"day");const u=h.diff(o,"second"),c=360+(i-d.j*u)%360;this._printPredictedWind(c,h.format("H.mm"),Object(a.m)(t),o.format("H.mm"))}_printCompass(t){const e=Object(r.a)(),i=Math.min(this._height/1.4,this._width/1.4)/2,s=this._width/2,n=this._height/2.8,d=Object(a.n)(t),h=.6*i,l=h*Math.cos(d),u=h*Math.sin(d),c=[[Math.round(s+l),Math.round(n+u)],[Math.round(s-l),Math.round(n-u)]];this._svg.attr("height",this._height).attr("width",this._width);const p=this._svg.append("svg").attr("class","compass").attr("x",s).attr("y",n);Object(o.k)({element:p,radius:i}),this._svg.append("path").datum(c).attr("d",e).attr("marker-end","url(#wind-arrow)")}_printText(t,e,i,s){var r,n;const d=Object(a.m)(t),h=Number.parseInt(window.getComputedStyle(document.querySelector("#wind")).getPropertyValue("line-height"),10),l=this._svg.append("svg"),u=l.append("text").attr("x","50%").attr("y","33%").html(`From ${Object(o.f)(d,!0)} at ${e}`),c=l.append("text").attr("x","50%").attr("y","66%").attr("class","text-light-separation").html(`Currently at ${s} from ${Object(o.f)(i,!0)}`),p=null===(r=u.node())||void 0===r?void 0:r.getBoundingClientRect(),_=null===(n=c.node())||void 0===n?void 0:n.getBoundingClientRect(),m=2*Math.max(Number(null==p?void 0:p.height),Number(null==_?void 0:_.height))+h,v=Math.max(Number(null==p?void 0:p.width),Number(null==_?void 0:_.width))+h;l.attr("x",(this._width-v)/2).attr("y","72%").attr("height",m).attr("width",v)}_addBackground(){this._svg.insert("rect",":first-child").attr("x",0).attr("y",0).attr("height",this._height).attr("width",this._width)}_printPredictedWind(t,e,i,s){this.clearMap(),this._svg.classed("d-none",!1),this._printCompass(t),this._printText(t,e,i,s),this._addBackground()}setPosition(t,e){this._svg.style("margin-left",e+"px").style("margin-top",t+"px")}clearMap(){this._svg.selectAll("*").remove(),this._svg.classed("d-none",!0)}}}).call(this,i("xeH2"))}}]);