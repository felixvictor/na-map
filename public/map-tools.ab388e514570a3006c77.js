/*! For license information please see map-tools.ab388e514570a3006c77.js.LICENSE.txt */
(self.webpackChunkna_map=self.webpackChunkna_map||[]).push([[674],{7541:(t,e,i)=>{i.r(e),i.d(e,{init:()=>z});var a=i(3838),n=i(7281),r=i(7484),s=i.n(r),o=i(285),l=i.n(o),d=i(178),h=i.n(d),u=i(2855),p=i(9022),c=i(393),w=i(1198),m=i(9843),v=i(2938);function f(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}function g(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,y(t,e,"get"))}function b(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,y(t,e,"set"),i),i}function y(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}s().extend(l()),s().extend(h()),s().locale("en-gb");var M=new WeakMap,k=new WeakMap,_=new WeakMap;class x extends m.Z{constructor(t){super(t,"sm","Set"),f(this,M,{writable:!0,value:void 0}),f(this,k,{writable:!0,value:void 0}),f(this,_,{writable:!0,value:{}}),b(this,M,`input-group-${this.baseId}`),b(this,k,`input-${this.baseId}`),this._init()}_init(){this._injectModal()}_injectModal(){const t=super.bodySel;b(this,_,new v.Z(t,this.baseId));const e=t.select("form").append("div").attr("class","mt-3");e.append("label").attr("for",g(this,k)).text("Predict time (server time)");e.append("div").classed("input-group date",!0).attr("id",g(this,M)).attr("data-target-input","nearest").append("input").attr("class","form-control").attr("type","time").attr("id",g(this,k)).attr("value",s().utc().format("HH:mm")).attr("data-bs-target",`#${g(this,M)}`).attr("aria-label",g(this,M)).attr("required","")}getTime(){return document.querySelector(`#${g(this,k)}`).value.trim()}getWind(){return g(this,_).getWind()}}function W(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}function T(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,N(t,e,"get"))}function $(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,N(t,e,"set"),i),i}function N(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}s().extend(l()),s().extend(h()),s().locale("en-gb");var S=new WeakMap,C=new WeakMap,I=new WeakMap,E=new WeakMap,j=new WeakMap,P=new WeakMap,B=new WeakMap,Z=new WeakMap;class q{constructor(){W(this,S,{writable:!0,value:void 0}),W(this,C,{writable:!0,value:{}}),W(this,I,{writable:!0,value:void 0}),W(this,E,{writable:!0,value:"Predict wind"}),W(this,j,{writable:!0,value:300}),W(this,P,{writable:!0,value:void 0}),W(this,B,{writable:!0,value:260}),W(this,Z,{writable:!0,value:"wind-arrow"}),$(this,I,(0,p.MF)(T(this,E))),$(this,P,`menu-${T(this,I)}`),this._setupListener()}_setupSvg(){$(this,C,(0,a.Z)("#wind svg"))}_menuClicked(){(0,u.KS)("Menu",T(this,E)),T(this,S)?T(this,S).show():(this._setupSvg(),$(this,S,new x(T(this,E))),T(this,S).getModalNode().addEventListener("hidden.bs.modal",(()=>{this._useUserInput()})))}_setupListener(){document.querySelector(`#${T(this,P)}`).addEventListener("click",(()=>{this._menuClicked()}))}_useUserInput(){const t=T(this,S).getWind(),e=T(this,S).getTime();this._predictWind(t,e)}_predictWind(t,e){const i="H.mm";let a;const n=/(\d+)[\s.:](\d+)/.exec(e),r=Number.parseInt(n[1],10),o=Number.parseInt(n[2],10);a=Number.isNaN(Number(t))?(0,c.Ri)(String(t)):Number(t);const l=s()().utc().second(0).millisecond(0),d=s()(l).hour(r).minute(o);d.isBefore(l)&&d.add(1,"day");const h=d.diff(l,"second"),u=360+(a-p.er*h)%360;this._printPredictedWind(u,d.format(i),(0,c.tT)(t),l.format(i))}_printCompass(t){const e=(0,n.Z)(),i=Math.min(T(this,j)/1.4,T(this,B)/1.4)/2,a=T(this,B)/2,r=T(this,j)/2.8,s=(0,c.Ht)(t),o=.6*i,l=o*Math.cos(s),d=o*Math.sin(s),h=[[Math.round(a+l),Math.round(r+d)],[Math.round(a-l),Math.round(r-d)]];T(this,C).attr("height",T(this,j)).attr("width",T(this,B));const u=T(this,C).append("svg").attr("class","compass").attr("x",a).attr("y",r);(0,w.$G)({element:u,radius:i}),T(this,C).append("path").attr("class","stroke-thick").datum(h).attr("d",e).attr("marker-end",`url(#${T(this,Z)})`)}_printText(t,e,i,a){const n=(0,c.tT)(t),r=Number.parseInt(window.getComputedStyle(document.querySelector("#wind")).getPropertyValue("line-height"),10),s=T(this,C).append("svg"),o=s.append("text").attr("x","50%").attr("y","33%").html(`From ${(0,w.Iy)(n,!0)} at ${e}`),l=s.append("text").attr("x","50%").attr("y","66%").attr("class","text-light-separation").html(`Currently at ${a} from ${(0,w.Iy)(i,!0)}`),d=o.node()?.getBoundingClientRect(),h=l.node()?.getBoundingClientRect(),u=2*Math.max(Number(d?.height),Number(h?.height))+r,p=Math.max(Number(d?.width),Number(h?.width))+r;s.attr("x",(T(this,B)-p)/2).attr("y","72%").attr("height",u).attr("width",p)}_addBackground(){T(this,C).insert("rect",":first-child").attr("x",0).attr("y",0).attr("height",T(this,j)).attr("width",T(this,B))}_printPredictedWind(t,e,i,a){this.clearMap(),T(this,C).classed("d-none",!1),this._printCompass(t),this._printText(t,e,i,a),this._addBackground()}setPosition(t,e){T(this,C).style("margin-left",`${e}px`).style("margin-top",`${t}px`)}clearMap(){T(this,C).selectAll("*").remove(),T(this,C).classed("d-none",!0)}}const z=()=>{new q}},2938:(t,e,i)=>{i.d(e,{Z:()=>m});i(3223);var a=i(1198),n=i(393),r=i(5311);function s(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}function o(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,d(t,e,"get"))}function l(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,d(t,e,"set"),i),i}function d(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}var h=new WeakMap,u=new WeakMap,p=new WeakMap,c=new WeakMap,w=new WeakMap;class m{constructor(t,e){s(this,h,{writable:!0,value:void 0}),s(this,u,{writable:!0,value:void 0}),s(this,p,{writable:!0,value:void 0}),s(this,c,{writable:!0,value:{}}),s(this,w,{writable:!0,value:{}}),l(this,c,t),l(this,h,e),l(this,u,`form-${o(this,h)}`),l(this,p,`slider-${o(this,h)}`),this._inject(),l(this,w,r(`#${o(this,p)}`)),this._setup()}_setup(){window.sliderTooltip=t=>`${(0,a.nD)(String(t.value))}<br>${String(t.value)}Â°`,o(this,w).roundSlider({sliderType:"default",handleSize:"+1",startAngle:90,width:20,radius:110,min:0,max:359,step:360/n.Tm.length,editableTooltip:!1,tooltipFormat:"sliderTooltip",create(){this.control.css("display","block")}})}_inject(){const t=o(this,c).append("form").attr("id",o(this,u)).append("div").attr("class","text-center");t.append("label").attr("for",o(this,p)).text("Current in-game wind"),t.append("div").attr("id",o(this,p)).attr("class","rslider d-inline-block")}_getInputValue(){return o(this,w).roundSlider("getValue")}getWind(){const t=(0,n.tT)(this._getInputValue());let e;return e=Number.isNaN(Number(t))?(0,n.Ri)(t):Number(t),e}}}}]);