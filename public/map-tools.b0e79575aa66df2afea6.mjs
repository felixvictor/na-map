/*! For license information please see map-tools.b0e79575aa66df2afea6.mjs.LICENSE.txt */
(self.webpackChunkna_map=self.webpackChunkna_map||[]).push([[674],{7541:(t,e,i)=>{i.r(e),i.d(e,{init:()=>j});var a=i(4017),r=i(5049),n=i(7484),s=i.n(n),l=i(285),d=i.n(l),o=i(178),u=i.n(o),h=i(2855),p=i(9022),c=i(393),m=i(1198),w=i(9843),v=i(2938);function g(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,b(t,e,"get"))}function f(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,b(t,e,"set"),i),i}function b(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}s().extend(d()),s().extend(u()),s().locale("en-gb");var M=new WeakMap,k=new WeakMap,_=new WeakMap;class y extends w.Z{constructor(t){super(t,"sm","Set"),M.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:{}}),f(this,M,`input-group-${this.baseId}`),f(this,k,`input-${this.baseId}`),this._init()}_init(){this._injectModal()}_injectModal(){const t=super.bodySel;f(this,_,new v.Z(t,this.baseId));const e=t.select("form").append("div").attr("class","mt-3");e.append("label").attr("for",g(this,k)).text("Predict time (server time)");e.append("div").classed("input-group date",!0).attr("id",g(this,M)).attr("data-target-input","nearest").append("input").attr("class","form-control").attr("type","time").attr("id",g(this,k)).attr("value",s().utc().format("HH:mm")).attr("data-bs-target",`#${g(this,M)}`).attr("aria-label",g(this,M)).attr("required","")}getTime(){return document.querySelector(`#${g(this,k)}`).value.trim()}getWind(){return g(this,_).getWind()}}function x(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,$(t,e,"get"))}function W(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,$(t,e,"set"),i),i}function $(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}s().extend(d()),s().extend(u()),s().locale("en-gb");var N=new WeakMap,T=new WeakMap,S=new WeakMap,I=new WeakMap,C=new WeakMap,E=new WeakMap,P=new WeakMap,B=new WeakMap;class Z{constructor(){N.set(this,{writable:!0,value:void 0}),T.set(this,{writable:!0,value:{}}),S.set(this,{writable:!0,value:void 0}),I.set(this,{writable:!0,value:"Predict wind"}),C.set(this,{writable:!0,value:300}),E.set(this,{writable:!0,value:void 0}),P.set(this,{writable:!0,value:260}),B.set(this,{writable:!0,value:"wind-arrow"}),W(this,S,(0,p.MF)(x(this,I))),W(this,E,`menu-${x(this,S)}`),this._setupListener()}_setupSvg(){W(this,T,(0,a.Z)("#wind svg"))}_menuClicked(){(0,h.KS)("Menu",x(this,I)),x(this,N)?x(this,N).show():(this._setupSvg(),W(this,N,new y(x(this,I))),x(this,N).getModalNode().addEventListener("hidden.bs.modal",(()=>{this._useUserInput()})))}_setupListener(){document.querySelector(`#${x(this,E)}`).addEventListener("click",(()=>{this._menuClicked()}))}_useUserInput(){const t=x(this,N).getWind(),e=x(this,N).getTime();this._predictWind(t,e)}_predictWind(t,e){const i="H.mm";let a;const r=/(\d+)[\s.:](\d+)/.exec(e),n=Number.parseInt(r[1],10),l=Number.parseInt(r[2],10);a=Number.isNaN(Number(t))?(0,c.Ri)(String(t)):Number(t);const d=s()().utc().second(0).millisecond(0),o=s()(d).hour(n).minute(l);o.isBefore(d)&&o.add(1,"day");const u=o.diff(d,"second"),h=360+(a-p.er*u)%360;this._printPredictedWind(h,o.format(i),(0,c.tT)(t),d.format(i))}_printCompass(t){const e=(0,r.Z)(),i=Math.min(x(this,C)/1.4,x(this,P)/1.4)/2,a=x(this,P)/2,n=x(this,C)/2.8,s=(0,c.Ht)(t),l=.6*i,d=l*Math.cos(s),o=l*Math.sin(s),u=[[Math.round(a+d),Math.round(n+o)],[Math.round(a-d),Math.round(n-o)]];x(this,T).attr("height",x(this,C)).attr("width",x(this,P));const h=x(this,T).append("svg").attr("class","compass").attr("x",a).attr("y",n);(0,m.$G)({element:h,radius:i}),x(this,T).append("path").attr("class","stroke-thick").datum(u).attr("d",e).attr("marker-end",`url(#${x(this,B)})`)}_printText(t,e,i,a){var r,n;const s=(0,c.tT)(t),l=Number.parseInt(window.getComputedStyle(document.querySelector("#wind")).getPropertyValue("line-height"),10),d=x(this,T).append("svg"),o=d.append("text").attr("x","50%").attr("y","33%").html(`From ${(0,m.Iy)(s,!0)} at ${e}`),u=d.append("text").attr("x","50%").attr("y","66%").attr("class","text-light-separation").html(`Currently at ${a} from ${(0,m.Iy)(i,!0)}`),h=null===(r=o.node())||void 0===r?void 0:r.getBoundingClientRect(),p=null===(n=u.node())||void 0===n?void 0:n.getBoundingClientRect(),w=2*Math.max(Number(null==h?void 0:h.height),Number(null==p?void 0:p.height))+l,v=Math.max(Number(null==h?void 0:h.width),Number(null==p?void 0:p.width))+l;d.attr("x",(x(this,P)-v)/2).attr("y","72%").attr("height",w).attr("width",v)}_addBackground(){x(this,T).insert("rect",":first-child").attr("x",0).attr("y",0).attr("height",x(this,C)).attr("width",x(this,P))}_printPredictedWind(t,e,i,a){this.clearMap(),x(this,T).classed("d-none",!1),this._printCompass(t),this._printText(t,e,i,a),this._addBackground()}setPosition(t,e){x(this,T).style("margin-left",`${e}px`).style("margin-top",`${t}px`)}clearMap(){x(this,T).selectAll("*").remove(),x(this,T).classed("d-none",!0)}}const j=()=>{new Z}},2938:(t,e,i)=>{i.d(e,{Z:()=>m});i(3223);var a=i(1198),r=i(393),n=i(3609);function s(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,d(t,e,"get"))}function l(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,d(t,e,"set"),i),i}function d(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}var o=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,c=new WeakMap;class m{constructor(t,e){o.set(this,{writable:!0,value:void 0}),u.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),p.set(this,{writable:!0,value:{}}),c.set(this,{writable:!0,value:{}}),l(this,p,t),l(this,o,e),l(this,u,`form-${s(this,o)}`),l(this,h,`slider-${s(this,o)}`),this._inject(),l(this,c,n(`#${s(this,h)}`)),this._setup()}_setup(){window.sliderTooltip=t=>`${(0,a.nD)(String(t.value))}<br>${String(t.value)}Â°`,s(this,c).roundSlider({sliderType:"default",handleSize:"+1",startAngle:90,width:20,radius:110,min:0,max:359,step:360/r.Tm.length,editableTooltip:!1,tooltipFormat:"sliderTooltip",create(){this.control.css("display","block")}})}_inject(){const t=s(this,p).append("form").attr("id",s(this,u)).append("div").attr("class","text-center");t.append("label").attr("for",s(this,h)).text("Current in-game wind"),t.append("div").attr("id",s(this,h)).attr("class","rslider d-inline-block")}_getInputValue(){return s(this,c).roundSlider("getValue")}getWind(){const t=(0,r.tT)(this._getInputValue());let e;return e=Number.isNaN(Number(t))?(0,r.Ri)(t):Number(t),e}}}}]);