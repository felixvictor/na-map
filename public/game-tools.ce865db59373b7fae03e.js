(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"2k6a":function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return h});s("/YXa"),s("y89P"),s("U00V");var i=s("nUlG"),a=s("BfWa"),n=s("/Cyf"),o=s("f4w0"),d=s("Av7d"),l=s("g/zZ"),c=s("0lY5");const r=(t,e,s)=>Object(c.y)(e)+" – "+Object(c.y)(s);class h{constructor(t,e,s){this._recipeData=t,this._moduleData=e,this._serverType=l.servers.find(t=>t.id===s).type,this._baseName="List admiralty items and recipes",this._baseId="recipe-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(o.b)("Tools",this._baseName),t.stopPropagation(),this._recipeListSelected()})}_injectModal(){Object(d.z)(this._modalId,this._baseName);const t=this._baseId+"-select",e=Object(i.select)("#"+this._modalId+" .modal-body");e.append("select").attr("name",t).attr("id",t),e.append("label").attr("for",t).attr("class","text-muted pl-2").text("Items listed here may not be available in the game (yet)."),e.append("div").attr("id",""+this._baseId).attr("class","container-fluid")}_getOptions(){return Object(a.b)().key(t=>t.craftGroup).sortKeys(n.a).entries(this._recipeData.filter(t=>"Any"===t.serverType||t.serverType===this._serverType)).map(t=>'<optgroup label="'+t.key+'">'+t.values.map(t=>'<option value="'+t.id+'">'+t.name.replace(/(\d)-(\d)(st|rd|th)/,r)).join("</option>")).join("</optgroup>")}_setupSelect(){const e=t("#"+this._baseId+"-select"),s=this._getOptions();e.append(s)}_setupSelectListener(){t("#"+this._baseId+"-select").addClass("selectpicker").on("change",t=>this._recipeSelected(t)).selectpicker({dropupAuto:!1,liveSearch:!0,liveSearchNormalize:!0,liveSearchPlaceholder:"Search ...",title:"Select item",virtualScroll:!0})}_initModal(){this._injectModal(),this._setupSelect(),this._setupSelectListener()}_recipeListSelected(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")}_getRecipeData(t){return this._recipeData.find(e=>e.id===t)}_getRequirementText(t){let e='<table class="table table-sm card-table"><tbody>';return t.labourPrice&&(e+="<tr><td>"+t.labourPrice+" labour hours</td></tr>"),t.goldPrice&&(e+="<tr><td>"+Object(d.t)(t.goldPrice)+"</td></tr>"),t.itemRequirements.length&&(e+="<tr><td>"+t.itemRequirements.map(t=>t.amount+" "+t.name).join("</td></tr><tr><td>")+"</td></tr>"),e+="</tbody></table>"}_getPropertiesText(t){let e="",s="",i="";return this._moduleData.forEach(e=>{e[1].filter(e=>e.id===t.result.id).forEach(t=>{s=e[0],i="<tr><td>"+t.properties.map(t=>{const e=t.isPercentage?Object(c.w)(t.amount/100):t.amount;return t.modifier+" "+e}).join("</td></tr><tr><td>")+"</td></tr>"})}),i?(e+='<h6 class="card-subtitle mb-2 text-muted">'+s+"</h6>",e+='<table class="table table-sm card-table"><tbody>'+i+"</tbody></table>"):e+="<p>"+Object(c.q)(t.result.amount)+" "+t.result.name+"</p>",e}_getText(t){const e=this._getRecipeData(t);let s='<div class="row no-gutters card-deck">';return s+='<div class="card col-6"><div class="card-header">Item</div>',s+='<div class="card-body">',s+=this._getRequirementText(e),s+="</div></div>",s+='<div class="card col-6"><div class="card-header">Result</div>',s+='<div class="card-body">',s+=this._getPropertiesText(e),s+="</div></div>",s+="</div></div>"}_recipeSelected(e){const s=Number(t(e.currentTarget).find(":selected").val());Object(i.select)("#"+this._baseId+" div").remove(),Object(i.select)("#"+this._baseId).append("div").classed("recipes mt-4",!0),Object(i.select)("#"+this._baseId+" div").html(this._getText(s))}}}).call(this,s("xeH2"))},Cybf:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return u});s("/YXa"),s("CfbV"),s("9UJh"),s("y89P"),s("U00V");var i=s("6n+t"),a=s("/Cyf"),n=s("ntgT"),o=s("wbYc"),d=s("nUlG"),l=s("aBO9"),c=s("ueFo"),r=s("f4w0"),h=s("Av7d");String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};class u{constructor(t,e){this._ownershipData=t,this._nationData=e,this._baseName="Port ownership",this._baseId="ownership-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._colourScale=Object(o.c)().range(["#72823a","#825fc8","#78b642","#cd47a3","#50b187","#d34253","#628bcc","#cb9f3d","#cc88c9","#ca5b2b","#b55576","#c27b58"]),this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(r.b)("Tools",this._baseName),t.stopPropagation(),this._ownershipListSelected()})}_injectModal(){Object(h.z)(this._modalId,this._baseName);const t=this._baseId+"-select",e=Object(d.select)("#"+this._modalId+" .modal-body");e.append("label").append("select").attr("name",t).attr("id",t);const s=e.append("div").attr("id",""+this._baseId);this._div=s.append("div"),this._svg=s.append("svg").attr("class","area")}_getOptions(){return""+this._ownershipData.map(t=>'<option value="'+t.region+'">'+t.region+"</option>;").join("")}_setupSelect(){const e=t("#"+this._baseId+"-select"),s=this._getOptions();e.append(s)}_setupSelectListener(){t("#"+this._baseId+"-select").addClass("selectpicker").on("change",t=>this._regionSelected(t)).selectpicker({noneSelectedText:"Select region"}).val("default").selectpicker("refresh")}_initModal(){this._injectModal(),this._setupSelect(),this._setupSelectListener()}_ownershipListSelected(){let e=!1;document.getElementById(this._modalId)||(e=!0,this._initModal()),t("#"+this._modalId).on("shown.bs.modal",()=>{e&&(this._injectArea(),e=!1)}).modal("show")}static getHeight(){return Math.floor(.75*top.innerHeight)}_getWidth(){return Math.floor(document.getElementById(this._baseId).offsetWidth)}_injectArea(){const t=t=>new Date(t.date),e=this._getWidth(),s=Math.min(1e3,u.getHeight()),d=32,c=32,r=32,p=h.A.filter(t=>9!==t.id).map(t=>t.short),_=this._nationData;_.keys=p;const b=Object(l.h)().offset(l.i).keys(_.keys)(_);this._svg.attr("width",e).attr("height",s),(()=>{const n=(()=>{const i=Object(o.b)().domain(Object(a.d)(_,e=>t(e))).range([r,e-d]),n=Object(o.b)().domain([Object(a.f)(b[0],t=>t[0]),Object(a.e)(b[b.length-1],t=>t[1])]).range([s-c,0]);return Object(l.b)().x(e=>i(t(e.data))).y0(t=>n(t[0])).y1(t=>n(t[1])).curve(l.c)})(),u=new Map(h.A.map(t=>[t.short,t.name]));this._colourScale.domain(_.keys),this._svg.selectAll("path").data(b).join(t=>t.append("path").attr("fill",t=>this._colourScale(t.key)).attr("stroke",t=>this._colourScale(t.key)).attr("d",n)),this._svg.selectAll(".area-label").data(b).join(t=>t.append("text").attr("class","area-label").text(t=>u.get(t.key)).attr("transform",Object(i.areaLabel)(n)))})(),this._svg.append("g").call(i=>{const l=Object(o.e)().domain(Object(a.d)(_,e=>t(e))).range([r,e-d]);i.attr("transform","translate(0,"+(s-c)+")").call(Object(n.a)(l).ticks(e/80).tickSizeOuter(0)),i.attr("font-size",".8rem").attr("font-family","")})}_injectChart(t){Object(c.a)().data(t).enableAnimations(!1).timeFormat("%-d %B %Y").zQualitative(!0).zColorScale(this._colourScale).width(this._getWidth())(this._div.node())}_regionSelected(e){const s=t(e.currentTarget).find(":selected").val();this._div.selectAll("*").remove();const i=this._ownershipData.filter(t=>t.region===s).map(t=>t.data)[0];this._injectChart(i)}}}).call(this,s("xeH2"))},FCTg:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return I});s("/YXa"),s("U00V");var i=s("tqUM"),a=s("JanF"),n=s("f4w0"),o=s("0lY5");function d(){const t=v(['\n            <div class="modules mt-4">\n                ',"\n            </div>\n        "]);return d=function(){return t},t}function l(){const t=v(["\n            ","\n        "]);return l=function(){return t},t}function c(){const t=v(["\n            <p>Weight "," tons<br />Lifetime "," hours</p>\n            ","\n        "]);return c=function(){return t},t}function r(){const t=v(["\n            ","\n        "]);return r=function(){return t},t}function h(){const t=v(["\n                                <tr>\n                                    <td>",'</td>\n                                    <td class="text-right">\n                                        ','\n                                    </td>\n                                    <td class="text-right">\n                                        ',"\n                                    </td>\n                                </tr>\n                            "]);return h=function(){return t},t}function u(){const t=v(['\n            <table class="table table-sm">\n                <thead>\n                    <tr>\n                        <th scope="col">Item</th>\n                        <th scope="col" class="text-right">Chance (%)</th>\n                        <th scope="col" class="text-right">Amount</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ',"\n                </tbody>\n            </table>\n        "]);return u=function(){return t},t}function p(){const t=v(['\n            <div id="','" class="modal" tabindex="-1" role="dialog" aria-labelledby="title-','" aria-hidden="true">\n                <div class="modal-dialog','" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 id="title-','" class="modal-title">\n                                ','\n                            </h5>\n                        </div>\n                        <div class="modal-body">','</div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-dismiss="modal">\n                                ',"\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "]);return p=function(){return t},t}function _(){const t=v(['\n                        <label>\n                            <select id="','" class="selectpicker">\n                                ',"\n                            </select>\n                        </label>\n                    "]);return _=function(){return t},t}function b(){const t=v(["\n            ",'\n            <div id="','"></div>\n        ']);return b=function(){return t},t}function m(){const t=v(['\n                        <option value="','">',"</option>\n                    "]);return m=function(){return t},t}function f(){const t=v(["\n            ",";\n        "]);return f=function(){return t},t}function g(){const t=v(['\n                            <option value="','">',"</option>\n                        "]);return g=function(){return t},t}function j(){const t=v(["\n                ","\n            "]);return j=function(){return t},t}function v(t,e){return e||(e=t.slice(0)),t.raw=e,t}class I{constructor(t){this._sourceData=t,this._baseName="List loot and chests",this._baseId="loot-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._types=["loot","chests","items"],this._select$={},this._selectId={},this._types.forEach(t=>{this._selectId[t]=this._baseId+"-"+t+"-select"}),this._selectedType="",this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(n.b)("Tools",this._baseName),t.stopPropagation(),this._sourceListSelected()})}_getOptions(t){if("items"!==t)return Object(i.d)(j(),Object(a.a)(this._sourceData[t],t=>t.id,t=>Object(i.d)(g(),t.id,t.name)));const e=new Map;return this._types.filter(t=>"items"!==t).forEach(t=>{this._sourceData[t].forEach(t=>{t.items.forEach(s=>{const i=new Map([[t.id,{id:t.id,name:t.name,chance:s.chance,amount:s.amount}]]);e.set(s.id,{name:s.name,sources:e.has(s.id)?new Map([...e.get(s.id).sources,...i]):i})})})}),this._items=new Map([...e.entries()].sort((t,e)=>t[1].name<e[1].name?-1:t[1].name>e[1].name?1:0)),Object(i.d)(f(),Object(a.a)(this._items,(t,e)=>e,t=>Object(i.d)(m(),t[0],t[1].name)))}_getModalBody(){return Object(i.d)(b(),Object(a.a)(this._types,t=>t,t=>Object(i.d)(_(),this._selectId[t],this._getOptions(t))),this._baseId)}_insertBaseModal(t,e,s,a){void 0===s&&(s="xl"),void 0===a&&(a="Close");const n="xl"===s||"lg"===s||"sm"===s?" modal-"+s:"";return Object(i.d)(p(),t,t,n,t,e,this._getModalBody(),a)}_injectModal(){Object(i.f)(this._insertBaseModal(this._modalId,this._baseName,"md"),document.getElementById("modal-section"))}_setupSelectListeners(){this._types.forEach(t=>{this._select$[t].on("change",()=>{this._selectedType=t,this._itemSelected()}).selectpicker({dropupAuto:!1,liveSearch:!0,liveSearchNormalize:!0,liveSearchPlaceholder:"Search ...",title:"Select "+t,virtualScroll:!0})})}_initModal(){this._injectModal(),this._mainDiv=document.getElementById(this._baseId),this._types.forEach(e=>{this._select$[e]=t("#"+this._selectId[e])}),this._setupSelectListeners()}_sourceListSelected(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")}_getItemData(t){return this._sourceData[this._selectedType].find(e=>e.id===t)}_getItemsText(t){return Object(i.d)(u(),Object(a.a)(t,t=>t.id,t=>Object(i.d)(h(),t.name,(t=>Object(o.q)(100*(1-t)))(t.chance),(t=>t.min===t.max?Object(o.q)(t.min):Object(o.q)(t.min)+" to "+Object(o.q)(t.max))(t.amount))))}_getLootText(t){return Object(i.d)(r(),this._getItemsText(t.items))}_getChestText(t){return Object(i.d)(c(),Object(o.q)(t.weight),Object(o.q)(t.lifetime),this._getItemsText(t.items))}_getSourceText(){const t=[...this._items.get(this._selectedItemId).sources].map(t=>t[1]);return Object(i.d)(l(),this._getItemsText(t))}_resetOtherSelects(){this._types.filter(t=>t!==this._selectedType).forEach(t=>{this._select$[t].val("default").selectpicker("refresh")})}_getText(){if("items"===this._selectedType)return this._getSourceText();const t=this._getItemData(this._selectedItemId);return"loot"===this._selectedType?this._getLootText(t):this._getChestText(t)}_getTable(){return Object(i.d)(d(),this._getText())}_itemSelected(){const t=this._select$[this._selectedType].find(":selected");this._selectedItemId=Number(t.val()),this._resetOtherSelects(),Object(i.f)(this._getTable(),this._mainDiv)}}}).call(this,s("xeH2"))},FhzS:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return d});s("y89P"),s("SgDD");var i=s("nUlG"),a=s("f4w0"),n=s("Av7d"),o=s("0lY5");class d{constructor(t,e){this._blueprintData=t,this._woodData=e,this._baseName="List ship blueprint",this._baseId="ship-blueprint-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._defaultWood={frame:"Fir Log",trim:"Crew Space"},this._woodsSelected=[],this._woodOptions={},this._tables=[],this._init=!0,this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(a.b)("Tools",this._baseName),t.stopPropagation(),this._listSelected()})}_injectModal(){Object(n.z)(this._modalId,this._baseName,"md");const t=this._baseId+"-ship-select",e=Object(i.select)("#"+this._modalId+" .modal-body");let s=e.append("div").classed("row no-gutters mb-2",!0);s.append("label").attr("for",t),s.append("select").attr("name",t).attr("id",t),s=e.append("div").classed("row no-gutters",!0),["frame","trim"].forEach(t=>{const e=this._baseId+"-"+t+"-select";s.append("label").attr("for",e),s.append("select").attr("name",e).attr("id",e).classed("pr-2",!0)}),this._blueprintList=e.append("div").attr("id",""+this._baseId).classed("blueprint mt-4",!0)}_getShipOptions(){return""+this._blueprintData.map(t=>'<option value="'+t.name+'">'+t.name+"</option>;").join("")}_setupShipSelect(){const e=t("#"+this._baseId+"-ship-select"),s=this._getShipOptions();e.append(s)}_setupWoodOptions(){const t=this._woodData.frame.sort(Object(o.H)(["name"])),e=this._woodData.trim.filter(t=>"Light"!==t.name).sort(Object(o.H)(["name"]));this._woodOptions.frame=t.map(t=>'<option value="'+t.name+'">'+t.name+"</option>"),this._woodOptions.trim=e.map(t=>'<option value="'+t.name+'">'+t.name+"</option>")}_setupWoodSelect(t,e){this._setupWoodOptions(),this._woodsSelected[t]=this._defaultWood[t],e.append(this._woodOptions[t]),e.attr("disabled","disabled")}_setupSelects(){this._setupShipSelect(),["frame","trim"].forEach(e=>{const s=t("#"+this._baseId+"-"+e+"-select");this._setupWoodSelect(e,s)})}_setupShipSelectListener(){t("#"+this._baseId+"-ship-select").addClass("selectpicker").on("change",t=>this._blueprintSelected(t)).selectpicker({noneSelectedText:"Select blueprint",width:"fit"}).val("default").selectpicker("refresh")}_setupWoodSelectListener(t,e){e.addClass("selectpicker").on("change",()=>this._woodSelected(t,e)).selectpicker({noneSelectedText:"Select "+t,width:"fit"}).val("default").selectpicker("refresh")}_setupSelectListener(){this._setupShipSelectListener(),["frame","trim"].forEach(e=>{const s=t("#"+this._baseId+"-"+e+"-select");this._setupWoodSelectListener(e,s)})}_initModal(){this._injectModal(),this._setupSelects(),this._setupSelectListener()}_setWoodSelect(e){t("#"+this._baseId+"-"+e+"-select").removeAttr("disabled").val(this._defaultWood[e].replace(" Log","")).selectpicker("refresh")}_woodSelected(t,e){this._woodsSelected[t]=e.val(),this._woodsSelected[t]+="Bermuda Cedar"===this._woodsSelected[t]||"Crew Space"===this._woodsSelected[t]?"":" Log",this._updateText()}_listSelected(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")}_updateTable(t,e,s){void 0===s&&(s=[]);s.length&&(()=>{let e=!0;const i=t.select("thead").selectAll("tr").data(s,t=>t[0]);i.exit().attr("class","exit").transition().delay(2e3).duration(5e3).style("opacity",0).remove();const a=i.enter().append("tr").style("opacity",0).attr("class","enter").transition().delay(9e3).duration(5e3).style("opacity",1),n=i.merge(a),o=n.selectAll("th").data(t=>t);o.attr("class","update"),o.exit().attr("class","exit").transition().delay(2e3).duration(5e3).style("opacity",0).remove();const d=o.enter().append("th").style("opacity",0).attr("class","enter").transition().delay(9e3).duration(5e3).style("opacity",1);o.merge(d).html(t=>t).append("i").classed("fas fa-sort",!0).on("click",(t,s,i)=>{e?(n.sort((e,s)=>s[t]<e[t]),e=!1,console.log(i[s]),i[s].classed("fa-sort-down",!1),i[s].classed("fa-sort-up",!0)):(n.sort((e,s)=>s[t]>e[t]),e=!0,console.log(i[s]),i[s].classed("fa-sort-up",!1),i[s].classed("fa-sort-down",!0))})})(),t.select("tbody").selectAll("tr").data(e).join(t=>t.append("tr")).selectAll("td").data(t=>t).join(t=>t.append("td")).html(t=>t)}_updateText(){const t=[];this._currentBlueprintData.doubloons&&t.push(["Doubloons",Object(o.q)(this._currentBlueprintData.doubloons)]),t.push(["Provisions",Object(o.q)(this._currentBlueprintData.provisions)]),this._currentBlueprintData.permit&&t.push(["Permit",Object(o.q)(this._currentBlueprintData.permit)]),t.push(["Craft level",Object(o.q)(this._currentBlueprintData.craftLevel)]),t.push(["Shipyard level",Object(o.q)(this._currentBlueprintData.shipyardLevel)]),t.push(["Labour hours",Object(o.q)(this._currentBlueprintData.labourHours)]),t.push(["Craft experience",Object(o.q)(this._currentBlueprintData.craftXP)]);const e=this._currentBlueprintData.resources.map(t=>[t.name,Object(o.q)(t.amount)]);let s=!1,i=!1,a=0;if("Crew Space"===this._woodsSelected.trim){const t=this._currentBlueprintData.trims.find(t=>"Crew Space"===t.name).amount,s=e.findIndex(t=>"Hemp"===t[0]);e[s][1]=Object(o.q)(Number(e[s][1])+t)}else{const t=this._currentBlueprintData.trims.find(t=>"Planking"===t.name).amount;if(this._woodsSelected.trim===this._woodsSelected.frame)a+=t;else{const s=e.findIndex(t=>t[0]===this._woodsSelected.trim);s>=0?e[s][1]=Object(o.q)(Number(e[s][1])+a):(i=!0,e.push([this._woodsSelected.trim,Object(o.q)(t)]))}}a+=this._currentBlueprintData.frames.find(t=>t.name===this._woodsSelected.frame).amount;const n=e.findIndex(t=>t[0]===this._woodsSelected.frame);if(n>=0?e[n][1]=Object(o.q)(Number(e[n][1])+a):(s=!0,e.push([this._woodsSelected.frame,Object(o.q)(a)])),s&&i){const t=e.length-1;var d=[e[t-1],e[t]];e[t]=d[0],e[t-1]=d[1]}this._updateTable(this._tables.Extra,t),this._updateTable(this._tables.Resources,e)}_blueprintSelected(e){if(this._init){this._init=!1,["frame","trim"].forEach(t=>{this._setWoodSelect(t)});const t=this._blueprintList.append("div").classed("card-deck",!0),e=e=>{const s=t.append("div").classed("card",!0);s.append("div").classed("card-header",!0).text(e);const i=s.append("div").classed("card-body",!0);this._tables[e]=i.append("table").classed("table table-sm card-table",!0),this._tables[e].append("thead"),this._tables[e].append("tbody")};e("Resources"),e("Extra")}this._blueprint=t(e.currentTarget).find(":selected").val(),this._currentBlueprintData=this._getBlueprintData(this._blueprint),this._updateText()}_getBlueprintData(t){return this._blueprintData.find(e=>e.name===t)}}}).call(this,s("xeH2"))},GmlK:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return c});s("/YXa"),s("CfbV"),s("9UJh"),s("w13K"),s("y89P"),s("U00V");var i=s("nUlG"),a=s("x4fR"),n=s.n(a),o=s("Av7d"),d=s("0lY5"),l=s("f4w0");String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};class c{constructor(t){this._cannonData=t,this._baseName="List cannons",this._baseId="cannon-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._groups=new Map,this._cannonData.long.forEach(t=>{for(const e of Object.entries(t)){const t=e[0],s=e[1];"name"!==t&&this._groups.set(t,{values:s,count:Object.entries(s).length})}}),this._groups=new Map([...this._groups.entries()].sort()),this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(l.b)("Tools",this._baseName),t.stopPropagation(),this._cannonListSelected()})}_injectModal(){Object(o.z)(this._modalId,this._baseName);const t=Object(i.select)("#"+this._modalId+" .modal-body");["medium","long","carronade"].forEach(e=>{t.append("h5").text(Object(d.b)(e)),t.append("div").attr("id",e+"-list").attr("class","modules")})}_initTablesort(){const t=t=>t.replace(/[^\-?0-9.]/g,"");n.a.extend("number",t=>t.match(/^[-+]?[£\u0024Û¢´€]?\d+\s*([,.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,.]\d{0,2})?[£\u0024Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,.])?-?(\d)+([E,e][-+][\d]+)?%?$/),(e,s)=>{const i=t(e);return((t,e)=>{let s=parseFloat(t),i=parseFloat(e);return(s=Number.isNaN(s)?0:s)-(i=Number.isNaN(i)?0:i)})(t(s),i)})}_initModal(){this._initTablesort(),this._injectModal(),["medium","long","carronade"].forEach(t=>{this._injectList(t)})}_cannonListSelected(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")}_injectList(e){t("#"+e+"-list").append(this._getList(e));const s=document.getElementById("table-"+e+"-list");new n.a(s)}_getList(t){let e="";return e+='<table id="table-'+t+'-list" class="table table-sm small tablesort">',e+='<thead><tr><th scope="col"></th>',this._groups.forEach((t,s)=>{e+='<th scope="col" class="text-center" colspan="'+t.count+'">'+Object(d.b)(s)+"</th>"}),e+="</tr>",e+='<tr><th scope="col" class="text-right" data-sort-default>Pd</th>',this._groups.forEach(t=>{Object.entries(t.values).forEach(t=>{e+='<th class="text-right">'+Object(d.b)(t[0])+"</th>"})}),e+="</tr></thead><tbody>",this._cannonData[t].forEach(t=>{const s=t.name.replace(" (","<br>(").replaceAll(" "," ");e+='<tr><th scope="row" class="text-right" data-sort="'+parseInt(t.name,10)+'">'+s+"</th>",Object.entries(t).forEach((t,s)=>{"name"!==t[0]&&Object.entries(t[1]).forEach(t=>{e+='<td class="text-right" data-sort="'+(t[1]||0)+'">'+(t[1]?Object(d.p)(t[1]):"")+"</td>"})}),e+="</tr>"}),e+="</tbody></table>"}}}).call(this,s("xeH2"))},K8hv:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return d});s("/YXa"),s("U00V");var i=s("nUlG"),a=s("0lY5"),n=s("f4w0"),o=s("Av7d");class d{constructor(t,e){this._ingredientData=t,this._moduleData=e,this._baseName="List recipe ingredients",this._baseId="ingredient-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(n.b)("Tools",this._baseName),t.stopPropagation(),this._ingredientListSelected()})}_injectModal(){Object(o.z)(this._modalId,this._baseName),Object(i.select)("#"+this._modalId+" .modal-body").append("div").attr("id",""+this._baseId).attr("class","container-fluid")}_initModal(){this._injectModal(),this._injectList()}_ingredientListSelected(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")}_getProperties(t){let e="",s="",i="";return this._moduleData.forEach(e=>{e[1].filter(e=>e.name===t).forEach(t=>{s=e[0],i="<tr><td>"+t.properties.map(t=>{const e=t.isPercentage?Object(a.w)(t.amount/100):Object(a.v)(t.amount);return t.modifier+" "+e}).join("</td></tr><tr><td>")+"</td></tr>"})}),e="<h6 class='text-muted text-left'>"+s+"</h6>",e+="<table class='table table-sm'><tbody>"+i+"</tbody></table>",i?e:""}_getRows(){return this._ingredientData.map(t=>"<tr><td>"+t.name+"</td><td>"+t.recipeNames.map(t=>{const e=this._getProperties(t);return console.log(t,e),e?'<a data-toggle="tooltip" title="'+e+'">'+t+"</a>":t}).join("<br>")+"</td></tr>")}_getText(){const t=this._getRows(),e=Object(a.d)(t,2);let s="";return[...new Array(e.length).keys()].forEach(t=>{s+='<div class="col-md-'+Math.floor(12/e.length)+'">',s+='<table class="table table-sm"><thead>',s+="<tr><th>Ingredient</th><th>Recipes</th></tr></thead><tbody>",s+=e[t].join(""),s+="</tbody></table></div>"}),s}_injectList(){Object(i.select)("#"+this._baseId+" div").remove(),Object(i.select)("#"+this._baseId).append("div").classed("row ingredients",!0),Object(i.select)("#"+this._baseId+" div").html(this._getText()),t('[data-toggle="tooltip"]').tooltip({html:!0,placement:"auto",sanitize:!1})}}}).call(this,s("xeH2"))},MDkH:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return d});s("/YXa"),s("U00V");var i=s("nUlG"),a=s("0lY5"),n=s("f4w0"),o=s("Av7d");class d{constructor(t){this._moduleData=t,this._baseName="List modules",this._baseId="module-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(n.b)("Tools",this._baseName),t.stopPropagation(),this._moduleListSelected()})}_injectModal(){Object(o.z)(this._modalId,this._baseName);const t=this._baseId+"-select",e=Object(i.select)("#"+this._modalId+" .modal-body");e.append("label").attr("for",t),e.append("select").attr("name",t).attr("id",t),e.append("div").attr("id",""+this._baseId).attr("class","container-fluid")}_getOptions(){return""+this._moduleData.map(t=>'<option value="'+t[0]+'"">'+t[0]+"</option>;").join("")}_setupSelect(){const e=t("#"+this._baseId+"-select"),s=this._getOptions();e.append(s)}_setupSelectListener(){t("#"+this._baseId+"-select").addClass("selectpicker").on("change",t=>this._moduleSelected(t)).selectpicker({noneSelectedText:"Select module category"}).val("default").selectpicker("refresh")}_initModal(){this._injectModal(),this._setupSelect(),this._setupSelectListener()}_moduleListSelected(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")}_getRows(t){const e=new Map([["L",Object(a.y)(1)+" – "+Object(a.y)(3)],["M",Object(a.y)(4)+" – "+Object(a.y)(5)],["S",Object(a.y)(6)+" – "+Object(a.y)(7)]]);function s(t){return"U"===t?"":" "+e.get(t)}let i="";const n=[];return this._moduleData.forEach(e=>{e[0]===t&&e[1].forEach((t,o)=>{const d=s=>s<e[1].length&&t.name===e[1][s].name&&JSON.stringify(t.properties)===JSON.stringify(e[1][s].properties);i=s(t.moduleLevel),d(o+1)&&(e[1][o+1].hasSamePropertiesAsPrevious=!0,i+="<br>"+s(e[1][o+1].moduleLevel)),d(o+2)&&(e[1][o+2].hasSamePropertiesAsPrevious=!0,i=""),void 0!==t.hasSamePropertiesAsPrevious&&t.hasSamePropertiesAsPrevious||n.push('<tr><td><span class="name">'+t.name+"</span><br>"+i+"</td><td>"+t.properties.map(t=>{const e=t.isPercentage?Object(a.w)(t.amount/100):Object(a.v)(t.amount);return t.modifier+" "+e}).join("<br>")+"</td></tr>")})}),n}_getText(t){const e=this._getRows(t),s=Object(a.d)(e,3);let i="";return[...new Array(s.length).keys()].forEach(t=>{i+='<div class="col-md-'+Math.floor(12/s.length)+'">',i+='<table class="table table-sm small"><thead>',i+="<tr><th>Module</th><th>Modifier</th></tr></thead><tbody>",i+=s[t].join(""),i+="</tbody></table></div>"}),i}_moduleSelected(e){const s=t(e.currentTarget).find(":selected").val();Object(i.select)("#"+this._baseId+" div").remove(),Object(i.select)("#"+this._baseId).append("div").classed("row modules mt-4",!0),Object(i.select)("#"+this._baseId+" div").html(this._getText(s))}}}).call(this,s("xeH2"))},ZQSh:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return d});var i=s("nUlG"),a=s("0lY5"),n=s("f4w0"),o=s("Av7d");class d{constructor(t){this._buildingData=t,this._baseName="List buildings",this._baseId="building-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(n.b)("Tools",this._baseName),t.stopPropagation(),this._buildingListSelected()})}_injectModal(){Object(o.z)(this._modalId,this._baseName);const t=this._baseId+"-select",e=Object(i.select)("#"+this._modalId+" .modal-body");e.append("label").attr("for",t),e.append("select").attr("name",t).attr("id",t),e.append("div").attr("id",""+this._baseId).attr("class","container-fluid")}_getOptions(){return""+this._buildingData.map(t=>'<option value="'+t.name+'">'+t.name+"</option>;").join("")}_setupSelect(){const e=t("#"+this._baseId+"-select"),s=this._getOptions();e.append(s)}_setupSelectListener(){t("#"+this._baseId+"-select").addClass("selectpicker").on("change",t=>this._buildingSelected(t)).selectpicker({noneSelectedText:"Select building"}).val("default").selectpicker("refresh")}_initModal(){this._injectModal(),this._setupSelect(),this._setupSelectListener()}_buildingListSelected(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")}_getBuildingData(t){return this._buildingData.filter(e=>e.name===t)[0]}_getProductText(t){let e="";return Array.isArray(t.resource)?(e+='<table class="table table-sm"><tbody>',e+="<tr><td>"+t.resource.map(t=>t.name).join("</td></tr><tr><td>")+"</td></tr>",e+="</tbody></table>"):(e+='<h5 class="card-title">'+t.resource.name+"</h5>",t.resource.price&&(e+='<table class="table table-sm card-table"><tbody>',e+="<tr><td>"+Object(o.t)(t.resource.price)+" per unit</td></tr>",void 0!==t.batch&&(e+="<tr><td>Batch of "+t.batch.amount+" units at "+Object(o.t)(t.batch.price)+"</td></tr>"),e+="</tbody></table>")),e}_getRequirementText(t){let e="";return e+='<table class="table table-sm card-table"><thead>',t.levels[0].materials.length?(e+="<tr><th>Level</th><th>Level build materials</th></tr>",e+="</thead><tbody>",t.levels.forEach((t,s)=>{e+="<tr><td>"+(s+1)+'</td><td class="text-left">',e+=t.materials.map(t=>Object(a.q)(t.amount)+" "+t.item).join("<br>"),e+="</td></tr>"})):(e+="<tr><th>Level</th><th>Production (units)</th><th>Labour cost (%)</th><th>Storage (units)</th><th>Build price (reals)</th></tr>",e+="</thead><tbody>",t.levels.forEach((t,s)=>{e+="<tr><td>"+(s+1)+"</td><td>"+Object(a.q)(t.production)+"</td><td>"+Object(a.q)(-100*t.labourDiscount)+"</td><td>"+Object(a.q)(t.maxStorage)+"</td><td>"+Object(a.q)(t.price)+"</td></tr>"})),e+="</tbody></table>"}_getText(t){const e=this._getBuildingData(t);let s='<div class="row no-gutters card-deck">';return s+='<div class="card col-4"><div class="card-header">Product</div>',s+='<div class="card-body product">',s+=this._getProductText(e),s+="</div></div>",s+='<div class="card col-8"><div class="card-header">Requirements</div>',s+='<div class="card-body px-0 requirements">',s+=this._getRequirementText(e),s+="</div></div>",s+="</div>"}_buildingSelected(e){const s=t(e.currentTarget).find(":selected").val();Object(i.select)("#"+this._baseId+" div").remove(),Object(i.select)("#"+this._baseId).append("div").classed("buildings mt-4",!0),Object(i.select)("#"+this._baseId+" div").html(this._getText(s))}}}).call(this,s("xeH2"))},alIf:function(t,e,s){"use strict";s.r(e),s.d(e,"init",function(){return O});s("/YXa"),s("FdtR"),s("U00V"),s("3XUK"),s("Peo2");var i=s("iSiJ"),a=s("pFgi"),n=s("ZQSh"),o=s("GmlK"),d=s("K8hv"),l=s("FCTg"),c=s("MDkH"),r=s("Cybf"),h=s("FhzS"),u=s("2k6a"),p=s("lhE0"),_=s("wNe0"),b=s("f4w0"),m=s("Av7d"),f=s("0lY5");let g="",j="";const v=[{fileName:"ships.json",name:"ships"},{fileName:"woods.json",name:"woods"},{fileName:"cannons.json",name:"cannons"},{fileName:"loot.json",name:"loot"},{fileName:"modules.json",name:"modules"},{fileName:"recipes.json",name:"recipes"},{fileName:"buildings.json",name:"buildings"},{fileName:"ownership.json",name:"ownership"},{fileName:"nations.json",name:"nations"},{fileName:"ship-blueprints.json",name:"shipBlueprints"}],I=()=>{const t=[],e={};v.forEach((e,s)=>{t[s]=fetch("data/"+e.fileName).then(f.c).then(f.x)}),Promise.all(t).then(t=>{t.forEach((t,s)=>{e[v[s].name]=t}),(t=>{const e=new i.a({shipData:t.ships,woodData:t.woods,moduleData:t.modules});new a.a(t.woods,"wood"),new _.a(t.woods),new o.a(t.cannons),new r.a(t.ownership,t.nations),new l.a(t.loot),new c.a(t.modules),new u.a(t.recipes.recipe,t.modules,j),new p.a(t.ships),new d.a(t.recipes.ingredient,t.modules),new n.a(t.buildings),new h.a(t.shipBlueprints,t.woods);g.has("cmp")&&g.has("v")&&g.get("v")===m.d&&(Object(b.b)("Menu","Paste ship compare"),e.initFromClipboard(g))})(e)}).catch(f.E)},O=(t,e)=>{j=t,g=e,I()}},lhE0:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return c});s("CfbV"),s("9UJh"),s("w13K"),s("y89P"),s("MTDe");var i=s("nUlG"),a=s("x4fR"),n=s.n(a),o=s("f4w0"),d=s("Av7d"),l=s("0lY5");String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};class c{constructor(t){this._shipData=t,this._baseName="List ships",this._baseId="ship-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(o.b)("Tools",this._baseName),t.stopPropagation(),this._shipListSelected()})}_injectModal(){Object(d.z)(this._modalId,this._baseName,"lg"),Object(i.select)("#"+this._modalId+" .modal-body").append("div").attr("id",""+this._baseId).attr("class","container-fluid")}_initTablesort(){const t=t=>t.replace(/[^\-?0-9.]/g,"");n.a.extend("number",t=>t.match(/^[-+]?[£\u0024Û¢´€]?\d+\s*([,.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,.]\d{0,2})?[£\u0024Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,.])?-?(\d)+([E,e][-+][\d]+)?%?$/),(e,s)=>{const i=t(e);return((t,e)=>{let s=parseFloat(t),i=parseFloat(e);return(s=Number.isNaN(s)?0:s)-(i=Number.isNaN(i)?0:i)})(t(s),i)})}_initModal(){this._initTablesort(),this._injectModal(),this._injectList()}_shipListSelected(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")}_injectList(){Object(i.select)("#"+this._baseId+" div").remove(),Object(i.select)("#"+this._baseId).append("div").classed("row ingredients",!0),Object(i.select)("#"+this._baseId+" div").html(this._getList());const t=document.getElementById("table-"+this._baseId);new n.a(t)}_getList(){let t="";return t+='<table id="table-'+this._baseId+'" class="table table-sm small tablesort"><thead>',t+="<tr>",t+='<th scope="col"></th>',t+='<th scope="col"></th>',t+='<th scope="col"></th>',t+='<th scope="col"></th>',t+='<th scope="col"></th>',t+='<th scope="col" colspan="2">Speed</th>',t+='<th scope="col"></th>',t+='<th scope="col" colspan="2">Chasers</th>',t+='<th scope="col"></th>',t+="</tr>",t+="<tr>",t+="<th>Class</th>",t+='<th scope="col">Name</th>',t+='<th scope="col">Guns</th>',t+='<th scope="col">Battle<br>rating</th>',t+='<th scope="col">Crew</th>',t+='<th scope="col">Maximum</th>',t+='<th scope="col">Turn</th>',t+='<th scope="col">Broadside</th>',t+='<th scope="col">Bow</th>',t+='<th scope="col">Stern</th>',t+='<th scope="col">Sides</th>',t+="</tr></thead><tbody>",this._shipData.filter(t=>!t.name.startsWith("Rookie ")).sort(Object(l.H)(["class","-battleRating","name"])).forEach(e=>{t+="<tr>",t+='<td class="text-right">'+e.class+"</td>",t+="<td>"+e.name+"</td>",t+='<td class="text-right">'+e.guns+"</td>",t+='<td class="text-right">'+e.battleRating+"</td>",t+='<td class="text-right">'+e.crew.max+"</td>",t+='<td class="text-right">'+Object(l.p)(e.ship.maxSpeed)+"</td>",t+='<td class="text-right">'+Object(l.p)(e.rudder.turnSpeed)+"</td>",t+='<td class="text-right">'+e.broadside.cannons+"</td>",t+='<td class="text-right">'+(e.gunsPerDeck[4]?e.gunsPerDeck[4]:"")+"</td>",t+='<td class="text-right">'+(e.gunsPerDeck[5]?e.gunsPerDeck[5]:"")+"</td>",t+='<td class="text-right">'+e.sides.armour+" ("+e.sides.thickness+")</td>",t+="</tr>"}),t+="</tbody></table>"}}}).call(this,s("xeH2"))},wNe0:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return c});s("/YXa"),s("w13K"),s("y89P"),s("U00V");var i=s("nUlG"),a=s("x4fR"),n=s.n(a),o=s("Av7d"),d=s("0lY5"),l=s("f4w0");class c{constructor(t){this._woodData=t,this._baseName="List woods",this._baseId="wood-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}_setupListener(){t("#"+this._buttonId).on("click",t=>{Object(l.b)("Tools",this._baseName),t.stopPropagation(),this._woodListSelected()})}_injectModal(){Object(o.z)(this._modalId,this._baseName);const t=Object(i.select)("#"+this._modalId+" .modal-body");t.append("h5").text("Frames"),t.append("div").attr("id","frame-list").attr("class","modules"),t.append("h5").text("Trims"),t.append("div").attr("id","trim-list").attr("class","modules")}_initTablesort(){const t=t=>t.replace(/[^\-?0-9.]/g,"");n.a.extend("number",t=>t.match(/^[-+]?[£\u0024Û¢´€]?\d+\s*([,.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,.]\d{0,2})?[£\u0024Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,.])?-?(\d)+([E,e][-+][\d]+)?%?$/),(e,s)=>{const i=t(e);return((t,e)=>{let s=parseFloat(t),i=parseFloat(e);return(s=Number.isNaN(s)?0:s)-(i=Number.isNaN(i)?0:i)})(t(s),i)})}_initModal(){this._initTablesort(),this._injectModal(),this._injectList("frame"),this._injectList("trim")}_woodListSelected(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")}_injectList(e){t("#"+e+"-list").append(this._getList(e));const s=document.getElementById("table-"+e+"-list");new n.a(s)}_getModifiers(t){const e=new Set;return this._woodData[t].forEach(t=>{t.properties.forEach(t=>{"Ship material"!==t.modifier&&"Boarding morale"!==t.modifier&&e.add(t.modifier)})}),[...e].sort()}_getList(t){const e=this._getModifiers(t);let s="";return s+='<table id="table-'+t+'-list" class="table table-sm small tablesort"><thead><tr><th data-sort-default>Wood</thdata-sort-default>',e.forEach(t=>{s+="<th>"+t+"</th>"}),s+="</tr></thead><tbody>",this._woodData[t].forEach(t=>{s+="<tr><td>"+t.name+"</td>",e.forEach(e=>{const i=t.properties.filter(t=>t.modifier===e).map(t=>t.amount)[0];s+='<td class="text-right" data-sort="'+(i||0)+'">'+(i?Object(d.p)(i):"")+"</td>"}),s+="</tr>"}),s+="</tbody></table>"}}}).call(this,s("xeH2"))}}]);