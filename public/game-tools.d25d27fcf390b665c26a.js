(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"2k6a":function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return n});s("W1QL"),s("Z8gF");var a=s("nUlG"),i=s("0lY5"),o=s("f4w0"),d=s("Av7d");class n{constructor(t,e){this._recipeData=t.map(t=>(t.name=t.name.replace(" Blueprint",""),t)),this._moduleData=e,this._baseName="List recipes",this._baseId="recipe-list",this._buttonId=`button-${this._baseId}`,this._modalId=`modal-${this._baseId}`,this._setupListener()}_setupListener(){t(`#${this._buttonId}`).on("click",t=>{Object(o.b)("Tools",this._baseName),t.stopPropagation(),this._recipeListSelected()})}_injectModal(){Object(d.v)(this._modalId,this._baseName);const t=`${this._baseId}-select`,e=Object(a.select)(`#${this._modalId} .modal-body`);e.append("label").attr("for",t),e.append("select").attr("name",t).attr("id",t),e.append("div").attr("id",`${this._baseId}`).attr("class","container-fluid")}_getOptions(){return`${this._recipeData.map(t=>`<option value="${t.name}">${t.name}</option>;`).join("")}`}_setupSelect(){const e=t(`#${this._baseId}-select`),s=this._getOptions();e.append(s)}_setupSelectListener(){t(`#${this._baseId}-select`).addClass("selectpicker").on("change",t=>this._recipeSelected(t)).selectpicker({noneSelectedText:"Select recipe"}).val("default").selectpicker("refresh")}_initModal(){this._injectModal(),this._setupSelect(),this._setupSelectListener()}_recipeListSelected(){document.getElementById(this._modalId)||this._initModal(),t(`#${this._modalId}`).modal("show")}_getRecipeData(t){return this._recipeData.filter(e=>e.name===t)[0]}_getRequirementText(t){let e='<table class="table table-sm"><tbody>';return t.laborPrice&&(e+=`<tr><td>${t.laborPrice} labour hours</td></tr>`),t.goldPrice&&(e+=`<tr><td>${Object(d.s)(t.goldPrice)}</td></tr>`),t.itemRequirements.length&&(e+=`<tr><td>${t.itemRequirements.map(t=>`${t.amount} ${t.name}`).join("</td></tr><tr><td>")}</td></tr>`),e+="</tbody></table>"}_getModuleText(t){let e="",s="",a="";return this._moduleData.forEach(e=>{e[1].filter(e=>e.name===t).forEach(t=>{s=e[0],a=`<tr><td>${t.properties.map(t=>{const e=t.absolute?t.amount:Object(i.s)(t.amount/100);return`${t.modifier} ${e}`}).join("</td></tr><tr><td>")}</td></tr>`})}),e=`<h6 class="card-subtitle mb-2 text-muted">${s}</h6>`,e+=`<table class="table table-sm"><tbody>${a}</tbody></table>`}_getText(t){const e=this._getRecipeData(t),s=e.module?e.module:e.name;let a='<div class="row no-gutters card-deck">';return a+='<div class="card col-4"><div class="card-header">ListRecipes</div>',a+='<div class="card-body"><h5 class="card-title">Requirements</h5>',a+=this._getRequirementText(e),a+="</div></div>",a+='<div class="card col-4"><div class="card-header">Resulting module</div>',a+='<div class="card-body"><h5 class="card-title">Properties</h5>',a+=this._getModuleText(s),a+="</div></div>",a+="</div></div>"}_recipeSelected(e){const s=t(e.currentTarget).find(":selected").val();Object(a.select)(`#${this._baseId} div`).remove(),Object(a.select)(`#${this._baseId}`).append("div").classed("recipes mt-4",!0),Object(a.select)(`#${this._baseId} div`).html(this._getText(s))}}}).call(this,s("xeH2"))},Cybf:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return p});s("W1QL"),s("J8hF"),s("Z8gF");var a=s("6n+t"),i=s("/Cyf"),o=s("ntgT"),d=s("wbYc"),n=s("nUlG"),r=s("aBO9"),l=s("ueFo"),c=s("f4w0"),h=s("Av7d");String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};class p{constructor(t,e){this._ownershipData=t,this._nationData=e,this._baseName="Port ownership",this._baseId="ownership-list",this._buttonId=`button-${this._baseId}`,this._modalId=`modal-${this._baseId}`,this._colourScale=Object(d.scaleOrdinal)().range(["#72823a","#825fc8","#78b642","#cd47a3","#50b187","#d34253","#628bcc","#cb9f3d","#cc88c9","#ca5b2b","#b55576","#c27b58"]),this._setupListener()}_setupListener(){t(`#${this._buttonId}`).on("click",t=>{Object(c.b)("Tools",this._baseName),t.stopPropagation(),this._ownershipListSelected()})}_injectModal(){Object(h.v)(this._modalId,this._baseName);const t=`${this._baseId}-select`,e=Object(n.select)(`#${this._modalId} .modal-body`);e.append("label").append("select").attr("name",t).attr("id",t);const s=e.append("div").attr("id",`${this._baseId}`);this._div=s.append("div"),this._svg=s.append("svg").attr("class","area")}_getOptions(){return`${this._ownershipData.map(t=>`<option value="${t.region}">${t.region}</option>;`).join("")}`}_setupSelect(){const e=t(`#${this._baseId}-select`),s=this._getOptions();e.append(s)}_setupSelectListener(){t(`#${this._baseId}-select`).addClass("selectpicker").on("change",t=>this._regionSelected(t)).selectpicker({noneSelectedText:"Select region"}).val("default").selectpicker("refresh")}_initModal(){this._injectModal(),this._setupSelect(),this._setupSelectListener()}_ownershipListSelected(){let e=!1;document.getElementById(this._modalId)||(e=!0,this._initModal()),t(`#${this._modalId}`).on("shown.bs.modal",()=>{e&&(this._injectArea(),e=!1)}).modal("show")}static getHeight(){return Math.floor(.75*top.innerHeight)}_getWidth(){return Math.floor(document.getElementById(this._baseId).offsetWidth)}_injectArea(){const t=t=>new Date(t.date),e=this._getWidth(),s=Math.min(1e3,p.getHeight()),n=32,l=32,c=32,u=h.w.filter(t=>9!==t.id).map(t=>t.short),_=this._nationData;_.keys=u;const b=Object(r.h)().offset(r.i).keys(_.keys)(_);this._svg.attr("width",e).attr("height",s),(()=>{const o=(()=>{const a=Object(d.scaleLinear)().domain(Object(i.b)(_,e=>t(e))).range([c,e-n]),o=Object(d.scaleLinear)().domain([Object(i.d)(b[0],t=>t[0]),Object(i.c)(b[b.length-1],t=>t[1])]).range([s-l,0]);return Object(r.b)().x(e=>a(t(e.data))).y0(t=>o(t[0])).y1(t=>o(t[1])).curve(r.c)})(),p=new Map(h.w.map(t=>[t.short,t.name]));this._colourScale.domain(_.keys),this._svg.selectAll("path").data(b).enter().append("path").attr("fill",t=>this._colourScale(t.key)).attr("stroke",t=>this._colourScale(t.key)).attr("d",o),this._svg.selectAll(".area-label").data(b).enter().append("text").attr("class","area-label").text(t=>p.get(t.key)).attr("transform",Object(a.areaLabel)(o))})(),this._svg.append("g").call(a=>{const r=Object(d.scaleTime)().domain(Object(i.b)(_,e=>t(e))).range([c,e-n]);a.attr("transform",`translate(0,${s-l})`).call(Object(o.a)(r).ticks(e/80).tickSizeOuter(0)),a.attr("font-size",".8rem").attr("font-family","")})}_injectChart(t){Object(l.a)().data(t).enableAnimations(!1).timeFormat("%-d %B %Y").zQualitative(!0).zColorScale(this._colourScale).width(this._getWidth())(this._div.node())}_regionSelected(e){const s=t(e.currentTarget).find(":selected").val();this._div.selectAll("*").remove();const a=this._ownershipData.filter(t=>t.region===s).map(t=>t.data)[0];this._injectChart(a)}}}).call(this,s("xeH2"))},FhzS:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return n});s("W1QL");var a=s("nUlG"),i=s("0lY5"),o=s("f4w0"),d=s("Av7d");class n{constructor(t,e){this._blueprintData=t,this._woodData=e,this._baseName="List ship blueprint",this._baseId="ship-blueprint-list",this._buttonId=`button-${this._baseId}`,this._modalId=`modal-${this._baseId}`,this._defaultWood={frame:"Fir",trim:"Crew Space"},this._woodsSelected=[],this._woodOptions={},this._tables=[],this._init=!0,this._setupListener()}_setupListener(){t(`#${this._buttonId}`).on("click",t=>{Object(o.b)("Tools",this._baseName),t.stopPropagation(),this._listSelected()})}_injectModal(){Object(d.v)(this._modalId,this._baseName);const t=`${this._baseId}-ship-select`,e=Object(a.select)(`#${this._modalId} .modal-body`);e.append("label").attr("for",t),e.append("select").attr("name",t).attr("id",t),["frame","trim"].forEach(t=>{const s=`${this._baseId}-${t}-select`;e.append("label").attr("for",s),e.append("select").attr("name",s).attr("id",s)}),this._blueprintList=e.append("div").attr("id",`${this._baseId}`).classed("blueprint mt-4",!0)}_getShipOptions(){return`${this._blueprintData.map(t=>`<option value="${t.name}">${t.name}</option>;`).join("")}`}_setupShipSelect(){const e=t(`#${this._baseId}-ship-select`),s=this._getShipOptions();e.append(s)}_setupWoodOptions(){const t=this._woodData.frame.sort((t,e)=>t.name<e.name?-1:t.name>e.name?1:0),e=this._woodData.trim.sort((t,e)=>t.name<e.name?-1:t.name>e.name?1:0);this._woodOptions.frame=t.map(t=>`<option value="${t.name}">${t.name}</option>`),this._woodOptions.trim=e.map(t=>`<option value="${t.name}">${t.name}</option>`)}_setupWoodSelect(t,e){this._setupWoodOptions(),this._woodsSelected[t]=this._defaultWood[t],e.append(this._woodOptions[t]),e.attr("disabled","disabled")}_setupSelects(){this._setupShipSelect(),["frame","trim"].forEach(e=>{const s=t(`#${this._baseId}-${e}-select`);this._setupWoodSelect(e,s)})}_setupShipSelectListener(){t(`#${this._baseId}-ship-select`).addClass("selectpicker").on("change",t=>this._blueprintSelected(t)).selectpicker({noneSelectedText:"Select blueprint"}).val("default").selectpicker("refresh")}_setupWoodSelectListener(t,e){e.addClass("selectpicker").on("change",()=>this._woodSelected(t,e)).selectpicker({noneSelectedText:`Select ${t}`}).val("default").selectpicker("refresh")}_setupSelectListener(){this._setupShipSelectListener(),["frame","trim"].forEach(e=>{const s=t(`#${this._baseId}-${e}-select`);this._setupWoodSelectListener(e,s)})}_initModal(){this._injectModal(),this._setupSelects(),this._setupSelectListener()}_setOtherSelect(e){const s="frame"===e?"trim":"frame";this._woodsSelected[s]===this._defaultWood[s]&&t(`#${this._baseId}-${s}-select`).val(this._defaultWood[s]).selectpicker("refresh")}_woodSelected(t,e){this._woodsSelected[t]=e.val(),this._setOtherSelect(t)}_listSelected(){document.getElementById(this._modalId)||this._initModal(),t(`#${this._modalId}`).modal("show")}_updateTable(t,e,s){void 0===s&&(s=[]);s.length&&(()=>{let e=!0;const a=t.select("thead").selectAll("tr").data(s,t=>t[0]);a.exit().attr("class","exit").transition().delay(2e3).duration(5e3).style("opacity",0).remove();const i=a.enter().append("tr").style("opacity",0).attr("class","enter").transition().delay(9e3).duration(5e3).style("opacity",1),o=a.merge(i),d=o.selectAll("th").data(t=>t);d.attr("class","update"),d.exit().attr("class","exit").transition().delay(2e3).duration(5e3).style("opacity",0).remove();const n=d.enter().append("th").style("opacity",0).attr("class","enter").transition().delay(9e3).duration(5e3).style("opacity",1);d.merge(n).html(t=>t).append("i").classed("fas fa-sort",!0).on("click",(t,s,a)=>{e?(o.sort((e,s)=>s[t]<e[t]),e=!1,console.log(a[s]),a[s].classed("fa-sort-down",!1),a[s].classed("fa-sort-up",!0)):(o.sort((e,s)=>s[t]>e[t]),e=!0,console.log(a[s]),a[s].classed("fa-sort-up",!1),a[s].classed("fa-sort-down",!0))})})(),(()=>{const s=t.select("tbody").selectAll("tr").data(e,t=>t[0]);s.exit().attr("class","exit").transition().delay(200).duration(1e3).style("opacity",0).remove();const a=s.enter().append("tr").style("opacity",0).attr("class","enter").transition().delay(1200).duration(1e3).style("opacity",1),i=s.merge(a).selectAll("td").data(t=>t);i.attr("class","update"),i.exit().attr("class","exit").transition().delay(200).duration(1e3).style("opacity",0).remove();const o=i.enter().append("td").style("opacity",0).attr("class","center").transition().delay(1200).duration(1e3).style("opacity",1);i.merge(o).html(t=>t)})()}_updateText(){const t=[["Ship rate",Object(i.u)(this._currentBlueprintData.ship.rate)],["Craft level",Object(i.p)(this._currentBlueprintData.craftLevel)],["Shipyard level",Object(i.p)(this._currentBlueprintData.shipyardLevel)],["Labour hours",Object(i.p)(this._currentBlueprintData.labourHours)],["Craft experience gained",Object(i.p)(this._currentBlueprintData.craftXP)]];this._currentBlueprintData.doubloons&&t.push(["Doubloons",Object(i.p)(this._currentBlueprintData.doubloons)]),t.push(["Provisions",Object(i.p)(this._currentBlueprintData.provisions)]),this._currentBlueprintData.permit&&t.push(["Permit",Object(i.p)(this._currentBlueprintData.permit)]);const e=this._currentBlueprintData.resources.map(t=>[t.name,Object(i.p)(t.amount)]),s=this._currentBlueprintData.frames.filter(t=>t.name===this._woodsSelected.frame).map(t=>[t.name,Object(i.p)(t.amount)]);if(console.log("vorher",e,s,this._woodsSelected),"Crew Space"===this._woodsSelected.trim){const t=e.findIndex(t=>"Hemp"===t[0]);e[t][1]=Object(i.p)(+e[t][1]+this._currentBlueprintData.trims.find(t=>"Crew Space"===t.name).amount)}else{const t=this._currentBlueprintData.trims.find(t=>"Planking"===t.name).amount;this._woodsSelected.frame===this._woodsSelected.trim?s[0][1]=Object(i.p)(+s[0][1]+t):s.push(this._woodsSelected.trim,Object(i.p)(t))}console.log("nachher",e,s),this._updateTable(this._tables.Ship,t),this._updateTable(this._tables.Resources,e),this._updateTable(this._tables.Woods,s)}_enableSelects(){["frame","trim"].forEach(e=>{t(`#${this._baseId}-${e}-select`).removeAttr("disabled").selectpicker("refresh")})}_blueprintSelected(e){if(this._init){const t=this._blueprintList.append("div").classed("row no-gutters card-deck",!0),e=e=>{const s=t.append("div").classed("card col-3",!0);s.append("div").classed("card-header",!0).text(e);const a=s.append("div").classed("card-body",!0);this._tables[e]=a.append("table").classed("table table-sm",!0),this._tables[e].append("thead"),this._tables[e].append("tbody")};this._init=!1,e("Ship"),e("Resources"),e("Woods")}this._blueprint=t(e.currentTarget).find(":selected").val(),this._currentBlueprintData=this._getBlueprintData(this._blueprint),this._enableSelects(),this._updateText()}_getBlueprintData(t){return this._blueprintData.find(e=>e.name===t)}}}).call(this,s("xeH2"))},GmlK:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return l});s("9ovy"),s("MYxt"),s("W1QL"),s("J8hF"),s("Z8gF");var a=s("nUlG"),i=s("x4fR"),o=s.n(i),d=s("Av7d"),n=s("0lY5"),r=s("f4w0");String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};class l{constructor(t){this._cannonData=t,this._baseName="List cannons",this._baseId="cannon-list",this._buttonId=`button-${this._baseId}`,this._modalId=`modal-${this._baseId}`,this._groups=["damage","dispersion","generic","crew"],this._setupListener()}_setupListener(){t(`#${this._buttonId}`).on("click",t=>{Object(r.b)("Tools",this._baseName),t.stopPropagation(),this._cannonListSelected()})}_injectModal(){Object(d.v)(this._modalId,this._baseName);const t=Object(a.select)(`#${this._modalId} .modal-body`);["medium","long","carronade"].forEach(e=>{t.append("h5").text(Object(n.b)(e)),t.append("div").attr("id",`${e}-list`).attr("class","modules")})}_initTablesort(){const t=t=>t.replace(/[^\-?0-9.]/g,"");o.a.extend("number",t=>t.match(/^[-+]?[£\x24Û¢´€]?\d+\s*([,.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,.]\d{0,2})?[£\x24Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,.])?-?(\d)+([E,e][-+][\d]+)?%?$/),(e,s)=>{const a=t(e);return((t,e)=>{let s=parseFloat(t),a=parseFloat(e);return(s=Number.isNaN(s)?0:s)-(a=Number.isNaN(a)?0:a)})(t(s),a)})}_initModal(){this._initTablesort(),this._injectModal(),["medium","long","carronade"].forEach(t=>{this._injectList(t)})}_cannonListSelected(){document.getElementById(this._modalId)||this._initModal(),t(`#${this._modalId}`).modal("show")}_injectList(e){t(`#${e}-list`).append(this._getList(e));const s=document.getElementById(`table-${e}-list`);new o.a(s)}_getModifiers(t){const e=new Set;return this._cannonData[t].forEach(t=>{this._groups.forEach(s=>{Object.entries(t[s]).forEach(t=>{let a=t[0];e.add(`${s} ${a}`)})})}),Array.from(e).sort()}_getList(t){const e=this._getModifiers(t);let s="";return s+=`<table id="table-${t}-list" class="table table-sm small tablesort"><thead><tr><th data-sort-default>Pounds</th>`,e.forEach(t=>{const e=Object(n.b)(t.replace("generic ","").replace("damage basic","damage").replace("damage penetration","penetration"));s+=`<th>${e}</th>`}),s+="</tr></thead><tbody>",this._cannonData[t].forEach(t=>{const a=t.name.replace(" (","<br>(").replaceAll(" "," ");s+=`<tr><td class="text-right" data-sort="${parseInt(t.name,10)}">${a}</td>`,e.forEach(e=>{this._groups.forEach(a=>{Object.entries(t[a]).forEach(t=>{let i=t[0],o=t[1];`${a} ${i}`===e&&(s+=`<td class="text-right" data-sort="${o||0}">${o?Object(n.o)(o):""}</td>`)})})}),s+="</tr>"}),s+="</tbody></table>"}}}).call(this,s("xeH2"))},K8hv:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return n});s("W1QL");var a=s("nUlG"),i=s("0lY5"),o=s("f4w0"),d=s("Av7d");class n{constructor(t,e){this._ingredientData=t,this._moduleData=e,this._baseName="List recipe ingredients",this._baseId="ingredient-list",this._buttonId=`button-${this._baseId}`,this._modalId=`modal-${this._baseId}`,this._setupListener()}_setupListener(){t(`#${this._buttonId}`).on("click",t=>{Object(o.b)("Tools",this._baseName),t.stopPropagation(),this._ingredientListSelected()})}_injectModal(){Object(d.v)(this._modalId,this._baseName),Object(a.select)(`#${this._modalId} .modal-body`).append("div").attr("id",`${this._baseId}`).attr("class","container-fluid")}_initModal(){this._injectModal(),this._injectList()}_ingredientListSelected(){document.getElementById(this._modalId)||this._initModal(),t(`#${this._modalId}`).modal("show")}_getProperties(t){let e="",s="",a="";return this._moduleData.forEach(e=>{e[1].filter(e=>e.name===t).forEach(t=>{s=e[0],a=`<tr><td>${t.properties.map(t=>{const e=t.absolute?t.amount:Object(i.s)(t.amount/100);return`${t.modifier} ${e}`}).join("</td></tr><tr><td>")}</td></tr>`})}),e=`<h6 class='text-muted text-left'>${s}</h6>`,e+=`<table class='table table-sm'><tbody>${a}</tbody></table>`}_getRows(){return this._ingredientData.map(t=>`<tr><td>${t.name}</td><td>${t.recipe.map(t=>`<a data-toggle="tooltip" data-html="true" title="${this._getProperties(t)}">${t}</a>`).join("<br>")}</td></tr>`)}_getText(){const t=this._getRows(),e=Object(i.d)(t,2);let s="";return Array.from(Array(e.length).keys()).forEach(t=>{s+=`<div class="col-md-${Math.floor(12/e.length)}">`,s+='<table class="table table-sm"><thead>',s+="<tr><th>Ingredient</th><th>ListRecipes</th></tr></thead><tbody>",s+=e[t].join(""),s+="</tbody></table></div>"}),s}_injectList(){Object(a.select)(`#${this._baseId} div`).remove(),Object(a.select)(`#${this._baseId}`).append("div").classed("row ingredients",!0),Object(a.select)(`#${this._baseId} div`).html(this._getText()),t('[data-toggle="tooltip"]').tooltip()}}}).call(this,s("xeH2"))},MDkH:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return n});s("W1QL");var a=s("nUlG"),i=s("0lY5"),o=s("f4w0"),d=s("Av7d");class n{constructor(t){this._moduleData=t,this._baseName="List modules",this._baseId="module-list",this._buttonId=`button-${this._baseId}`,this._modalId=`modal-${this._baseId}`,this._setupListener()}_setupListener(){t(`#${this._buttonId}`).on("click",t=>{Object(o.b)("Tools",this._baseName),t.stopPropagation(),this._moduleListSelected()})}_injectModal(){Object(d.v)(this._modalId,this._baseName);const t=`${this._baseId}-select`,e=Object(a.select)(`#${this._modalId} .modal-body`);e.append("label").attr("for",t),e.append("select").attr("name",t).attr("id",t),e.append("div").attr("id",`${this._baseId}`).attr("class","container-fluid")}_getOptions(){return`${this._moduleData.map(t=>`<option value="${t[0]}"">${t[0]}</option>;`).join("")}`}_setupSelect(){const e=t(`#${this._baseId}-select`),s=this._getOptions();e.append(s)}_setupSelectListener(){t(`#${this._baseId}-select`).addClass("selectpicker").on("change",t=>this._moduleSelected(t)).selectpicker({noneSelectedText:"Select module category"}).val("default").selectpicker("refresh")}_initModal(){this._injectModal(),this._setupSelect(),this._setupSelectListener()}_moduleListSelected(){document.getElementById(this._modalId)||this._initModal(),t(`#${this._modalId}`).modal("show")}_getRows(t){const e=new Map([["L",`${Object(i.u)(1)} – ${Object(i.u)(3)}`],["M",`${Object(i.u)(4)} – ${Object(i.u)(5)}`],["S",`${Object(i.u)(6)} – ${Object(i.u)(7)}`]]);function s(t){return"U"!==t?` ${e.get(t)}`:""}let a="";const o=[];return this._moduleData.forEach(e=>{e[0]===t&&e[1].forEach((t,d)=>{function n(s){return s<e[1].length&&t.name===e[1][s].name&&JSON.stringify(t.properties)===JSON.stringify(e[1][s].properties)}a=s(t.moduleLevel),n(d+1)&&(e[1][d+1].hasSamePropertiesAsPrevious=!0,a+=`<br>${s(e[1][d+1].moduleLevel)}`),n(d+2)&&(e[1][d+2].hasSamePropertiesAsPrevious=!0,a=""),void 0!==t.hasSamePropertiesAsPrevious&&t.hasSamePropertiesAsPrevious||o.push(`<tr><td><span class="name">${t.name}</span><br>${a}</td><td>${t.properties.map(t=>{const e=t.absolute?t.amount:Object(i.s)(t.amount/100);return`${t.modifier} ${e}`}).join("<br>")}</td></tr>`)})}),o}_getText(t){const e=this._getRows(t),s=Object(i.d)(e,3);let a="";return Array.from(Array(s.length).keys()).forEach(t=>{a+=`<div class="col-md-${Math.floor(12/s.length)}">`,a+='<table class="table table-sm small"><thead>',a+="<tr><th>Module</th><th>Modifier</th></tr></thead><tbody>",a+=s[t].join(""),a+="</tbody></table></div>"}),a}_moduleSelected(e){const s=t(e.currentTarget).find(":selected").val();Object(a.select)(`#${this._baseId} div`).remove(),Object(a.select)(`#${this._baseId}`).append("div").classed("row modules mt-4",!0),Object(a.select)(`#${this._baseId} div`).html(this._getText(s))}}}).call(this,s("xeH2"))},ZQSh:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return n});s("W1QL");var a=s("nUlG"),i=s("0lY5"),o=s("f4w0"),d=s("Av7d");class n{constructor(t){this._buildingData=t,this._baseName="List buildings",this._baseId="building-list",this._buttonId=`button-${this._baseId}`,this._modalId=`modal-${this._baseId}`,this._setupListener()}_setupListener(){t(`#${this._buttonId}`).on("click",t=>{Object(o.b)("Tools",this._baseName),t.stopPropagation(),this._buildingListSelected()})}_injectModal(){Object(d.v)(this._modalId,this._baseName);const t=`${this._baseId}-select`,e=Object(a.select)(`#${this._modalId} .modal-body`);e.append("label").attr("for",t),e.append("select").attr("name",t).attr("id",t),e.append("div").attr("id",`${this._baseId}`).attr("class","container-fluid")}_getOptions(){return`${this._buildingData.map(t=>`<option value="${t.name}">${t.name}</option>;`).join("")}`}_setupSelect(){const e=t(`#${this._baseId}-select`),s=this._getOptions();e.append(s)}_setupSelectListener(){t(`#${this._baseId}-select`).addClass("selectpicker").on("change",t=>this._buildingSelected(t)).selectpicker({noneSelectedText:"Select building"}).val("default").selectpicker("refresh")}_initModal(){this._injectModal(),this._setupSelect(),this._setupSelectListener()}_buildingListSelected(){document.getElementById(this._modalId)||this._initModal(),t(`#${this._modalId}`).modal("show")}_getBuildingData(t){return this._buildingData.filter(e=>e.name===t)[0]}_getProductText(t){let e="";return Array.isArray(t.resource)?(e+='<table class="table table-sm"><tbody>',e+=`<tr><td>${t.resource.map(t=>t.name).join("</td></tr><tr><td>")}</td></tr>`,e+="</tbody></table>"):(e+=`<h5 class="card-title">${t.resource.name}</h5>`,t.resource.price&&(e+='<table class="table table-sm"><tbody>',e+=`<tr><td>${Object(d.s)(t.resource.price)} per unit</td></tr>`,void 0!==t.batch&&(e+=`<tr><td>Batch of ${t.batch.amount} units at ${Object(d.s)(t.batch.price)}</td></tr>`),e+="</tbody></table>")),e}_getRequirementText(t){let e="";return e+='<table class="table table-sm"><thead>',t.levels[0].materials.length?(e+="<tr><th>Level</th><th>Level build materials</th></tr>",e+="</thead><tbody>",t.levels.forEach((t,s)=>{e+=`<tr><td>${s+1}</td><td class="text-left">`,e+=t.materials.map(t=>`${Object(i.p)(t.amount)} ${t.item}`).join("<br>"),e+="</td></tr>"})):(e+="<tr><th>Level</th><th>Production (units)</th><th>Labour cost (%)</th><th>Storage (units)</th><th>Build price (reals)</th></tr>",e+="</thead><tbody>",t.levels.forEach((t,s)=>{e+=`<tr><td>${s+1}</td><td>${Object(i.p)(t.production)}</td><td>${Object(i.p)(-100*t.labourDiscount)}</td><td>${Object(i.p)(t.maxStorage)}</td><td>${Object(i.p)(t.price)}</td></tr>`})),e+="</tbody></table>"}_getText(t){const e=this._getBuildingData(t);let s='<div class="row no-gutters card-deck">';return s+='<div class="card col-4"><div class="card-header">Product</div>',s+='<div class="card-body product">',s+=this._getProductText(e),s+="</div></div>",s+='<div class="card col-8"><div class="card-header">Requirements</div>',s+='<div class="card-body px-0 requirements">',s+=this._getRequirementText(e),s+="</div></div>",s+="</div>"}_buildingSelected(e){const s=t(e.currentTarget).find(":selected").val();Object(a.select)(`#${this._baseId} div`).remove(),Object(a.select)(`#${this._baseId}`).append("div").classed("buildings mt-4",!0),Object(a.select)(`#${this._baseId} div`).html(this._getText(s))}}}).call(this,s("xeH2"))},alIf:function(t,e,s){"use strict";s.r(e),s.d(e,"init",function(){return m});s("W1QL");var a=s("iSiJ"),i=s("pFgi"),o=s("ZQSh"),d=s("GmlK"),n=s("K8hv"),r=s("MDkH"),l=s("Cybf"),c=s("FhzS"),h=s("2k6a"),p=s("wNe0"),u=s("0lY5");const _=[{fileName:"ships.json",name:"ships"},{fileName:"woods.json",name:"woods"},{fileName:"cannons.json",name:"cannons"},{fileName:"modules.json",name:"modules"},{fileName:"recipes.json",name:"recipes"},{fileName:"buildings.json",name:"buildings"},{fileName:"ownership.json",name:"ownership"},{fileName:"nations.json",name:"nations"},{fileName:"ship-blueprints.json",name:"blueprints"}],b=()=>{const t=[],e={};_.forEach((e,s)=>{t[s]=fetch(`data/${e.fileName}`).then(u.c).then(u.t)}),Promise.all(t).then(t=>{t.forEach((t,s)=>{e[_[s].name]=t}),(t=>{new a.a(t.ships.shipData,t.woods),new i.a(t.woods,"wood"),new p.a(t.woods),new d.a(t.cannons),new l.a(t.ownership,t.nations),new r.a(t.modules),new h.a(t.recipes.recipe,t.modules),new n.a(t.recipes.ingredient,t.modules),new o.a(t.buildings),new c.a(t.blueprints.shipBlueprints,t.woods)})(e)}).catch(u.A)},m=()=>{b()}},wNe0:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return l});s("W1QL"),s("9ovy"),s("MYxt"),s("Z8gF");var a=s("nUlG"),i=s("x4fR"),o=s.n(i),d=s("Av7d"),n=s("0lY5"),r=s("f4w0");class l{constructor(t){this._woodData=t,this._baseName="List woods",this._baseId="wood-list",this._buttonId=`button-${this._baseId}`,this._modalId=`modal-${this._baseId}`,this._setupListener()}_setupListener(){t(`#${this._buttonId}`).on("click",t=>{Object(r.b)("Tools",this._baseName),t.stopPropagation(),this._woodListSelected()})}_injectModal(){Object(d.v)(this._modalId,this._baseName);const t=Object(a.select)(`#${this._modalId} .modal-body`);t.append("h5").text("Frames"),t.append("div").attr("id","frame-list").attr("class","modules"),t.append("h5").text("Trims"),t.append("div").attr("id","trim-list").attr("class","modules")}_initTablesort(){const t=t=>t.replace(/[^\-?0-9.]/g,"");o.a.extend("number",t=>t.match(/^[-+]?[£\x24Û¢´€]?\d+\s*([,.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,.]\d{0,2})?[£\x24Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,.])?-?(\d)+([E,e][-+][\d]+)?%?$/),(e,s)=>{const a=t(e);return((t,e)=>{let s=parseFloat(t),a=parseFloat(e);return(s=Number.isNaN(s)?0:s)-(a=Number.isNaN(a)?0:a)})(t(s),a)})}_initModal(){this._initTablesort(),this._injectModal(),this._injectList("frame"),this._injectList("trim")}_woodListSelected(){document.getElementById(this._modalId)||this._initModal(),t(`#${this._modalId}`).modal("show")}_injectList(e){t(`#${e}-list`).append(this._getList(e));const s=document.getElementById(`table-${e}-list`);new o.a(s)}_getModifiers(t){const e=new Set;return this._woodData[t].forEach(t=>{t.properties.forEach(t=>{"Ship material"!==t.modifier&&"Boarding morale"!==t.modifier&&e.add(t.modifier)})}),Array.from(e).sort()}_getList(t){const e=this._getModifiers(t);let s="";return s+=`<table id="table-${t}-list" class="table table-sm small tablesort"><thead><tr><th data-sort-default>Wood</thdata-sort-default>`,e.forEach(t=>{s+=`<th>${t}</th>`}),s+="</tr></thead><tbody>",this._woodData[t].forEach(t=>{s+=`<tr><td>${t.name}</td>`,e.forEach(e=>{const a=t.properties.filter(t=>t.modifier===e).map(t=>t.amount)[0];s+=`<td class="text-right" data-sort="${a||0}">${a?Object(n.o)(a):""}</td>`}),s+="</tr>"}),s+="</tbody></table>"}}}).call(this,s("xeH2"))}}]);