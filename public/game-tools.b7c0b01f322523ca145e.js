/*! For license information please see game-tools.b7c0b01f322523ca145e.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"2k6a":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return f}));n("lYjL"),n("IlJM"),n("/YXa"),n("8cZI"),n("lmye"),n("D/wG"),n("fp7Y"),n("JBxO"),n("FdtR"),n("Muwe"),n("y89P"),n("3dw1"),n("U00V"),n("wcNg"),n("3XUK"),n("Peo2");var r=n("PVJp"),i=n("BfWa"),a=n("SYoz"),o=n("f4w0"),s=n("Av7d"),c=n("g/zZ"),u=n("0lY5");function d(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){d(a,r,i,o,s,"next",t)}function s(t){d(a,r,i,o,s,"throw",t)}o(void 0)}))}}var h=function(t,e,n){return Object(u.D)(e)+" – "+Object(u.D)(n)},f=function(){function e(t){this._serverType=c.servers.find((function(e){return e.id===t})).type,this._baseName="List admiralty items and recipes",this._baseId="recipe-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}var d=e.prototype;return d._loadAndSetupData=function(){var t=l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(5).then(n.t.bind(null,"3KT9",3));case 3:return this._moduleData=t.sent.default,t.next=6,n.e(10).then(n.t.bind(null,"BUHQ",3));case 6:this._recipeData=t.sent.default.recipe,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Object(u.J)(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),d._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=l(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(o.b)("Tools",t._baseName),r.stopPropagation(),t._recipeListSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},d._injectModal=function(){Object(s.B)(this._modalId,this._baseName);var t=this._baseId+"-select",e=Object(r.a)("#"+this._modalId+" .modal-body");e.append("select").attr("name",t).attr("id",t),e.append("label").attr("for",t).attr("class","text-muted pl-2").text("Items listed here may not be available in the game (yet)."),e.append("div").attr("id",""+this._baseId).attr("class","container-fluid")},d._getOptions=function(){var t=this;return Object(i.b)().key((function(t){return t.craftGroup})).sortKeys(a.a).entries(this._recipeData.filter((function(e){return"Any"===e.serverType||e.serverType===t._serverType}))).map((function(t){return'<optgroup label="'+t.key+'">'+t.values.map((function(t){return'<option value="'+t.id+'">'+t.name.replace(/(\d)-(\d)(st|rd|th)/,h)})).join("</option>")})).join("</optgroup>")},d._setupSelect=function(){var e=t("#"+this._baseId+"-select"),n=this._getOptions();e.append(n)},d._setupSelectListener=function(){var e=this;t("#"+this._baseId+"-select").addClass("selectpicker").on("change",(function(t){return e._recipeSelected(t)})).selectpicker({dropupAuto:!1,liveSearch:!0,liveSearchNormalize:!0,liveSearchPlaceholder:"Search ...",title:"Select item",virtualScroll:!0})},d._initModal=function(){this._injectModal(),this._setupSelect(),this._setupSelectListener()},d._recipeListSelected=function(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")},d._getRecipeData=function(t){return this._recipeData.find((function(e){return e.id===t}))},d._getRequirementText=function(t){var e='<table class="table table-sm card-table"><tbody>';return t.labourPrice&&(e+="<tr><td>"+t.labourPrice+" labour hours</td></tr>"),t.goldPrice&&(e+="<tr><td>"+Object(s.t)(t.goldPrice)+"</td></tr>"),t.itemRequirements.length&&(e+="<tr><td>"+t.itemRequirements.map((function(t){return t.amount+" "+t.name})).join("</td></tr><tr><td>")+"</td></tr>"),e+="</tbody></table>"},d._getPropertiesText=function(t){var e="",n="",r="";return this._moduleData.forEach((function(e){e[1].filter((function(e){return e.id===t.result.id})).forEach((function(t){n=e[0],r="<tr><td>"+t.properties.map((function(t){var e=t.isPercentage?Object(u.C)(t.amount/100):t.amount;return t.modifier+" "+e})).join("</td></tr><tr><td>")+"</td></tr>"}))})),r?(e+='<h6 class="card-subtitle mb-2 text-muted">'+n+"</h6>",e+='<table class="table table-sm card-table"><tbody>'+r+"</tbody></table>"):e+="<p>"+Object(u.u)(t.result.amount)+" "+t.result.name+"</p>",e},d._getText=function(t){var e=this._getRecipeData(t),n='<div class="row no-gutters card-deck">';return n+='<div class="card col-6"><div class="card-header">Item</div>',n+='<div class="card-body">',n+=this._getRequirementText(e),n+="</div></div>",n+='<div class="card col-6"><div class="card-header">Result</div>',n+='<div class="card-body">',n+=this._getPropertiesText(e),n+="</div></div>",n+="</div></div>"},d._recipeSelected=function(e){var n=Number(t(e.currentTarget).find(":selected").val());Object(r.a)("#"+this._baseId+" div").remove(),Object(r.a)("#"+this._baseId).append("div").classed("recipes mt-4",!0),Object(r.a)("#"+this._baseId+" div").html(this._getText(n))},e}()}).call(this,n("xeH2"))},Cybf:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return y}));n("lYjL"),n("IlJM"),n("/YXa"),n("8cZI"),n("lmye"),n("D/wG"),n("1Qwx"),n("JBxO"),n("FdtR"),n("WoWj"),n("U00V"),n("wcNg"),n("3XUK"),n("Peo2");var r=n("6n+t"),i=n("2b7M"),a=n("ED/D"),o=n("qKAC"),s=n("ntgT"),c=n("CZaE"),u=n("XuR1"),d=n("OQCi"),l=n("PVJp"),h=n("8iYs"),f=n("2vd8"),p=n("K7oc"),b=n("JqJ0"),m=n("ueFo"),_=n("f4w0"),v=n("Av7d"),g=n("0lY5");function w(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function j(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){w(a,r,i,o,s,"next",t)}function s(t){w(a,r,i,o,s,"throw",t)}o(void 0)}))}}var y=function(){function e(){this._baseName="Port ownership",this._baseId="ownership-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._colourScale=Object(c.a)().range(v.h),this._setupListener()}var w=e.prototype;return w._loadAndSetupData=function(){var t=j(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(6).then(n.t.bind(null,"5Y/s",3));case 3:return this._nationData=t.sent.default,t.next=6,n.e(7).then(n.t.bind(null,"5f2R",3));case 6:this._ownershipData=t.sent.default,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Object(g.J)(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),w._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=j(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(_.b)("Tools",t._baseName),r.stopPropagation(),t._ownershipListSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},w._injectModal=function(){Object(v.B)(this._modalId,this._baseName);var t=this._baseId+"-select",e=Object(l.a)("#"+this._modalId+" .modal-body");e.append("label").append("select").attr("name",t).attr("id",t);var n=e.append("div").attr("id",""+this._baseId);this._div=n.append("div"),this._svg=n.append("svg").attr("class","area")},w._getOptions=function(){return""+this._ownershipData.map((function(t){return'<option value="'+t.region+'">'+t.region+"</option>;"})).join("")},w._setupSelect=function(){var e=t("#"+this._baseId+"-select"),n=this._getOptions();e.append(n)},w._setupSelectListener=function(){var e=this;t("#"+this._baseId+"-select").addClass("selectpicker").on("change",(function(t){return e._regionSelected(t)})).selectpicker({noneSelectedText:"Select region"}).val("default").selectpicker("refresh")},w._initModal=function(){this._injectModal(),this._setupSelect(),this._setupSelectListener()},w._ownershipListSelected=function(){var e=this,n=!1;document.getElementById(this._modalId)||(n=!0,this._initModal()),t("#"+this._modalId).on("shown.bs.modal",(function(){n&&(e._injectArea(),n=!1)})).modal("show")},e.getHeight=function(){return Math.floor(.75*top.innerHeight)},w._getWidth=function(){return Math.floor(document.getElementById(this._baseId).offsetWidth)},e.xValue=function(t){return new Date(t.date)},w._injectArea=function(){var t=this,n=this._getWidth(),c=Math.min(1e3,e.getHeight()),l=32,m=32,_=32,g=v.D.filter((function(t){return 9!==t.id})).map((function(t){return t.short})),w=this._nationData;w.keys=g;var j,y,I,x,O=Object(h.a)().offset(f.a).keys(w.keys)(w);this._svg.attr("width",n).attr("height",c),j=Object(d.a)().domain(Object(i.a)(w,(function(t){return e.xValue(t)}))).range([_,n-l]),y=Object(d.a)().domain([Object(a.a)(O[0],(function(t){return t[0]})),Object(o.a)(O[O.length-1],(function(t){return t[1]}))]).range([c-m,0]),I=Object(p.a)().x((function(t){return j(e.xValue(t.data))})).y0((function(t){return y(t[0])})).y1((function(t){return y(t[1])})).curve(b.a),x=new Map(v.D.map((function(t){return[t.short,t.name]}))),t._colourScale.domain(w.keys),t._svg.selectAll("path").data(O).join((function(e){return e.append("path").attr("fill",(function(e){return t._colourScale(e.key)})).attr("stroke",(function(e){return t._colourScale(e.key)})).attr("d",I)})),t._svg.selectAll(".area-label").data(O).join((function(t){return t.append("text").attr("class","area-label").text((function(t){return x.get(t.key)})).attr("transform",Object(r.areaLabel)(I))})),this._svg.append("g").call((function(t){var r=Object(u.b)().domain(Object(i.a)(w,(function(t){return e.xValue(t)}))).range([_,n-l]);t.attr("transform","translate(0,"+(c-m)+")").call(Object(s.a)(r).ticks(n/80).tickSizeOuter(0)),t.attr("font-size",".8rem").attr("font-family","")}))},w._injectChart=function(t){Object(m.a)().data(t).enableAnimations(!1).timeFormat("%-d %B %Y").zQualitative(!0).zColorScale(this._colourScale).width(this._getWidth())(this._div.node())},w._regionSelected=function(e){var n=t(e.currentTarget).find(":selected").val();this._div.selectAll("*").remove();var r=this._ownershipData.filter((function(t){return t.region===n})).map((function(t){return t.data}))[0];this._injectChart(r)},e}()}).call(this,n("xeH2"))},FCTg:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return O}));n("iPZ8"),n("kypl"),n("pCzD"),n("hi3g"),n("lYjL"),n("IlJM"),n("4owi"),n("/YXa"),n("lmye"),n("WB5j"),n("D/wG"),n("1Qwx"),n("fp7Y"),n("JBxO"),n("FdtR"),n("9UJh"),n("WoWj"),n("3dw1"),n("U00V"),n("wcNg"),n("3XUK"),n("Peo2");var r=n("tqUM"),i=n("JanF"),a=n("f4w0"),o=n("Av7d"),s=n("0lY5");function c(){var t=y(['\n            <div class="modules mt-4">\n                ',"\n            </div>\n        "]);return c=function(){return t},t}function u(){var t=y(["\n            ","\n        "]);return u=function(){return t},t}function d(){var t=y(["\n            <p>Weight "," tons<br />Lifetime "," hours</p>\n            ","\n        "]);return d=function(){return t},t}function l(){var t=y(["\n            ","\n        "]);return l=function(){return t},t}function h(){var t=y(["\n                                <tr>\n                                    <td>",'</td>\n                                    <td class="text-right">\n                                        ','\n                                    </td>\n                                    <td class="text-right">\n                                        ',"\n                                    </td>\n                                </tr>\n                            "]);return h=function(){return t},t}function f(){var t=y(['\n            <table class="table table-sm small">\n                <thead>\n                    <tr>\n                        <th scope="col">Item</th>\n                        <th scope="col" class="text-right">Chance (0 − 100)</th>\n                        <th scope="col" class="text-right">Amount</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ',"\n                </tbody>\n            </table>\n        "]);return f=function(){return t},t}function p(){var t=y(['\n            <button type="button" class="btn btn-secondary" data-dismiss="modal">\n                Close\n            </button>\n        ']);return p=function(){return t},t}function b(){var t=y(['\n                        <label>\n                            <select id="','" class="selectpicker">\n                                ',"\n                            </select>\n                        </label>\n                    "]);return b=function(){return t},t}function m(){var t=y(["\n            ",'\n            <div id="','"></div>\n        ']);return m=function(){return t},t}function _(){var t=y(['\n                        <option value="','">',"</option>\n                    "]);return _=function(){return t},t}function v(){var t=y(["\n            ",";\n        "]);return v=function(){return t},t}function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(){var t=y(['\n                            <option value="','">',"</option>\n                        "]);return w=function(){return t},t}function j(){var t=y(["\n                ","\n            "]);return j=function(){return t},t}function y(t,e){return e||(e=t.slice(0)),t.raw=e,t}function I(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){I(a,r,i,o,s,"next",t)}function s(t){I(a,r,i,o,s,"throw",t)}o(void 0)}))}}var O=function(){function e(){var t=this;this._baseName="List loot and chests",this._baseId="loot-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._modal$=null,this._types=["loot","chests","items"],this._select$={},this._selectId={},this._types.forEach((function(e){t._selectId[e]=t._baseId+"-"+e+"-select"})),this._selectedType="",this._setupListener()}var y=e.prototype;return y._loadAndSetupData=function(){var t=x(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(4).then(n.t.bind(null,"YqY6",3));case 3:this._sourceData=t.sent.default,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Object(s.J)(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),y._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=x(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(a.b)("Tools",t._baseName),r.stopPropagation(),t._sourceListSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},y._getOptions=function(t){var e=this;if("items"!==t)return Object(r.d)(j(),Object(i.a)(this._sourceData[t],(function(t){return t.id}),(function(t){return Object(r.d)(w(),t.id,t.name)})));var n=new Map;return this._types.filter((function(t){return"items"!==t})).forEach((function(t){e._sourceData[t].forEach((function(t){t.items.forEach((function(e){var r=new Map([[t.id,{id:t.id,name:t.name,chance:e.chance,amount:e.amount}]]);n.set(e.id,{name:e.name,sources:n.has(e.id)?new Map([].concat(g(n.get(e.id).sources),g(r))):r})}))}))})),this._items=new Map(g(n.entries()).sort((function(t,e){return t[1].name<e[1].name?-1:t[1].name>e[1].name?1:0}))),Object(r.d)(v(),Object(i.a)(this._items,(function(t,e){return e}),(function(t){return Object(r.d)(_(),t[0],t[1].name)})))},y._getModalBody=function(){var t=this;return Object(r.d)(m(),Object(i.a)(this._types,(function(t){return t}),(function(e){return Object(r.d)(b(),t._selectId[e],t._getOptions(e))})),this._baseId)},y._getModalFooter=function(){return Object(r.d)(p())},y._injectModal=function(){Object(r.f)(Object(o.C)({id:this._modalId,title:this._baseName,size:"md",body:this._getModalBody.bind(this),footer:this._getModalFooter}),document.getElementById("modal-section"))},y._setupSelectListeners=function(){var t=this;this._types.forEach((function(e){t._select$[e].on("change",(function(){t._selectedType=e,t._itemSelected()})).selectpicker({dropupAuto:!1,liveSearch:!0,liveSearchNormalize:!0,liveSearchPlaceholder:"Search ...",title:"Select "+e,virtualScroll:!0})}))},y._initModal=function(){var e=this;this._injectModal(),this._mainDiv=document.getElementById(this._baseId),this._types.forEach((function(n){e._select$[n]=t("#"+e._selectId[n])})),this._setupSelectListeners()},y._sourceListSelected=function(){this._modal$||(this._initModal(),this._modal$=t("#"+this._modalId)),this._modal$.modal("show")},y._getItemData=function(t){return this._sourceData[this._selectedType].find((function(e){return e.id===t}))},y._getItemsText=function(t){return Object(r.d)(f(),Object(i.a)(t,(function(t){return t.id}),(function(t){return Object(r.d)(h(),t.name,(n=t.chance,Object(s.u)(100*(1-n))),(e=t.amount).min===e.max?Object(s.u)(e.min):Object(s.u)(e.min)+" to "+Object(s.u)(e.max));var e,n})))},y._getLootText=function(t){return Object(r.d)(l(),this._getItemsText(t.items))},y._getChestText=function(t){return Object(r.d)(d(),Object(s.u)(t.weight),Object(s.u)(t.lifetime),this._getItemsText(t.items))},y._getSourceText=function(){var t=g(this._items.get(this._selectedItemId).sources).map((function(t){return t[1]}));return Object(r.d)(u(),this._getItemsText(t))},y._resetOtherSelects=function(){var t=this;this._types.filter((function(e){return e!==t._selectedType})).forEach((function(e){t._select$[e].val("default").selectpicker("refresh")}))},y._getText=function(){if("items"===this._selectedType)return this._getSourceText();var t=this._getItemData(this._selectedItemId);return"loot"===this._selectedType?this._getLootText(t):this._getChestText(t)},y._getTable=function(){return Object(r.d)(c(),this._getText())},y._itemSelected=function(){var t=this._select$[this._selectedType].find(":selected");this._selectedItemId=Number(t.val()),this._resetOtherSelects(),Object(r.f)(this._getTable(),this._mainDiv)},e}()}).call(this,n("xeH2"))},FhzS:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));n("lYjL"),n("IlJM"),n("FWxf"),n("/YXa"),n("8cZI"),n("lmye"),n("D/wG"),n("1Qwx"),n("JBxO"),n("FdtR"),n("WoWj"),n("SgDD"),n("3dw1"),n("U00V"),n("wcNg"),n("3XUK"),n("Peo2");var r=n("PVJp"),i=n("f4w0"),a=n("Av7d"),o=n("0lY5");function s(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){s(a,r,i,o,c,"next",t)}function c(t){s(a,r,i,o,c,"throw",t)}o(void 0)}))}}var u=function(){function e(){this._baseName="List ship blueprint",this._baseId="ship-blueprint-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._defaultWood={frame:"Fir",trim:"Crew Space"},this._woodsSelected=[],this._woodOptions={},this._tables=[],this._init=!0,this._setupListener()}var s=e.prototype;return s._loadAndSetupData=function(){var t=c(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(11).then(n.t.bind(null,"8u++",3));case 3:return this._blueprintData=t.sent.default,t.next=6,n.e(13).then(n.t.bind(null,"c8Sa",3));case 6:return this._woodData=t.sent.default,t.next=9,n.e(11).then(n.t.bind(null,"HzGx",3));case 9:e=t.sent.default,this._extractionCosts=new Map(e.standard.map((function(t){return[t.name,{real:t.real,labour:t.labour}]}))),this._craftingCosts=new Map(e.seasoned.map((function(t){return[t.name,{real:t.real,labour:t.labour,doubloon:t.doubloon,tool:t.tool}]}))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),Object(o.J)(t.t0);case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),s._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=c(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(i.b)("Tools",t._baseName),r.stopPropagation(),t._listSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},s._injectModal=function(){var t=this;Object(a.B)(this._modalId,this._baseName,"lg");var e=this._baseId+"-ship-select",n=Object(r.a)("#"+this._modalId+" .modal-body"),i=n.append("div").classed("row no-gutters mb-2",!0);i.append("label").attr("for",e),i.append("select").attr("name",e).attr("id",e),i=n.append("div").classed("row no-gutters",!0),["frame","trim"].forEach((function(e){var n=t._baseId+"-"+e+"-select";i.append("label").attr("for",n),i.append("select").attr("name",n).attr("id",n).classed("pr-2",!0)})),this._blueprintList=n.append("div").attr("id",""+this._baseId).classed("blueprint mt-4",!0)},s._getShipOptions=function(){return""+this._blueprintData.map((function(t){return'<option value="'+t.name+'">'+t.name+"</option>;"})).join("")},s._setupShipSelect=function(){var e=t("#"+this._baseId+"-ship-select"),n=this._getShipOptions();e.append(n)},s._setupWoodOptions=function(){var t=this._woodData.frame.sort(Object(o.M)(["name"])),e=this._woodData.trim.filter((function(t){return"Light"!==t.name})).sort(Object(o.M)(["name"]));this._woodOptions.frame=t.map((function(t){return'<option value="'+t.name+'">'+t.name+"</option>"})),this._woodOptions.trim=e.map((function(t){return'<option value="'+t.name+'">'+t.name+"</option>"}))},s._setupWoodSelect=function(t,e){this._setupWoodOptions(),this._woodsSelected[t]=this._defaultWood[t],e.append(this._woodOptions[t]),e.attr("disabled","disabled")},s._setupSelects=function(){var e=this;this._setupShipSelect(),["frame","trim"].forEach((function(n){var r=t("#"+e._baseId+"-"+n+"-select");e._setupWoodSelect(n,r)}))},s._setupShipSelectListener=function(){var e=this;t("#"+this._baseId+"-ship-select").addClass("selectpicker").on("change",(function(t){return e._blueprintSelected(t)})).selectpicker({noneSelectedText:"Select blueprint",width:"fit"}).val("default").selectpicker("refresh")},s._setupWoodSelectListener=function(t,e){var n=this;e.addClass("selectpicker").on("change",(function(){return n._woodSelected(t,e)})).selectpicker({noneSelectedText:"Select "+t,width:"fit"}).val("default").selectpicker("refresh")},s._setupSelectListener=function(){var e=this;this._setupShipSelectListener(),["frame","trim"].forEach((function(n){var r=t("#"+e._baseId+"-"+n+"-select");e._setupWoodSelectListener(n,r)}))},s._initModal=function(){this._injectModal(),this._setupSelects(),this._setupSelectListener()},s._setWoodSelect=function(e){t("#"+this._baseId+"-"+e+"-select").removeAttr("disabled").val(this._defaultWood[e]).selectpicker("refresh")},s._woodSelected=function(t,e){this._woodsSelected[t]=e.val(),this._updateText()},s._listSelected=function(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")},s._updateTable=function(t,e,n){void 0===n&&(n=[]);n.length&&function(){var e=t.select("thead").selectAll("tr").data(n,(function(t){return t[0]}));e.exit().remove();var r=e.enter().append("tr"),i=e.merge(r).selectAll("th").data((function(t){return t}));i.exit().remove();var a=i.enter().append("th");i.merge(a).html((function(t){return t}))}(),t.select("tbody").selectAll("tr").data(e).join((function(t){return t.append("tr")})).selectAll("td").data((function(t){return t})).join((function(t){return t.append("td")})).html((function(t){return t}))},s._updateText=function(){var t=this,e=this._currentBlueprintData.resources.map((function(t){return[t.name,t.amount]})),n=!1,r=!1,i=0,a=0;if("Crew Space"===this._woodsSelected.trim){var s=this._currentBlueprintData.wood.find((function(t){return"Crew Space"===t.name})).amount,c=e.findIndex((function(t){return"Hemp"===t[0]}));e[c][1]+=s}else if(a=this._currentBlueprintData.wood.find((function(t){return"Planking"===t.name})).amount,this._woodsSelected.trim===this._woodsSelected.frame)i+=a;else{var u=e.findIndex((function(e){return e[0]===t._woodsSelected.trim}));u>=0?e[u][1]+=a:(r=!0,e.push([this._woodsSelected.trim,a]))}i+=this._currentBlueprintData.wood.find((function(t){return"Frame"===t.name})).amount;var d=e.findIndex((function(e){return e[0]===t._woodsSelected.frame}));if(d>=0?e[d][1]+=i:(n=!0,e.push([this._woodsSelected.frame,i])),n&&r){var l=e.length-1,h=[e[l-1],e[l]];e[l]=h[0],e[l-1]=h[1]}var f=[];this._currentBlueprintData.doubloons&&f.push(["Doubloons",this._currentBlueprintData.doubloons]),f.push(["Provisions",this._currentBlueprintData.provisions]),this._currentBlueprintData.permit&&f.push(["Permit",this._currentBlueprintData.permit]),f.push(["Craft level",this._currentBlueprintData.craftLevel],["Shipyard level",this._currentBlueprintData.shipyardLevel],["Labour hours",this._currentBlueprintData.labourHours],["Craft experience",this._currentBlueprintData.craftXP]);var p=[],b=0,m=0,_=function(e){e.filter((function(e){return t._extractionCosts.has(e[0])})).forEach((function(e){var n;b+=(n=e,t._extractionCosts.get(n[0]).real*n[1]),m+=function(e){return t._extractionCosts.get(e[0]).labour*e[1]}(e)}))};_(e),_(f),b&&p.push(["Reals",Object(o.u)(b)],["Labour hours",Object(o.u)(m)]);var v=0,g=0,w=0,j=0;this._craftingCosts.has(this._woodsSelected.trim)&&(v+=this._craftingCosts.get(this._woodsSelected.trim).real*a,g+=this._craftingCosts.get(this._woodsSelected.trim).labour*a,w+=this._craftingCosts.get(this._woodsSelected.trim).doubloon*a,j+=this._craftingCosts.get(this._woodsSelected.trim).tool*a),this._craftingCosts.has(this._woodsSelected.frame)&&(v+=this._craftingCosts.get(this._woodsSelected.frame).real*i,g+=this._craftingCosts.get(this._woodsSelected.frame).labour*i,w+=this._craftingCosts.get(this._woodsSelected.frame).doubloon*i,j+=this._craftingCosts.get(this._woodsSelected.frame).tool*i),v&&p.push(["(S) reals",Object(o.u)(v)],["(S) labour hours",Object(o.u)(g)],["(S) doubloons",Object(o.u)(w)],["(S) tools",Object(o.u)(j)]),e=e.map((function(t){return[t[0],Object(o.u)(t[1])]})),f=f.map((function(t){return[t[0],Object(o.u)(t[1])]})),this._updateTable(this._tables.Resources,e),this._updateTable(this._tables.Extra,f),this._updateTable(this._tables.Materials,p)},s._blueprintSelected=function(e){var n=this;if(this._init){this._init=!1,["frame","trim"].forEach((function(t){n._setWoodSelect(t)}));var r=this._blueprintList.append("div").classed("card-deck",!0),i=function(t){var e=r.append("div").classed("card",!0);e.append("div").classed("card-header",!0).text(t);var i=e.append("div").classed("card-body",!0);n._tables[t]=i.append("table").classed("table table-sm card-table",!0),n._tables[t].append("thead"),n._tables[t].append("tbody")};i("Resources"),i("Extra"),i("Materials")}this._blueprint=t(e.currentTarget).find(":selected").val(),this._currentBlueprintData=this._getBlueprintData(this._blueprint),this._updateText()},s._getBlueprintData=function(t){return this._blueprintData.find((function(e){return e.name===t}))},e}()}).call(this,n("xeH2"))},GmlK:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return D}));n("iPZ8"),n("kypl"),n("pCzD"),n("4owi"),n("/YXa"),n("lmye"),n("WB5j"),n("D/wG"),n("1Qwx"),n("zSSO"),n("SUr3"),n("JBxO"),n("FdtR"),n("Muwe"),n("9UJh"),n("WoWj"),n("y89P"),n("aZFp"),n("3dw1"),n("U00V"),n("wcNg"),n("3XUK"),n("Nk23"),n("Peo2");var r=n("tqUM"),i=n("JanF"),a=n("x4fR"),o=n.n(a),s=n("f4w0"),c=n("Av7d"),u=n("0lY5");function d(){var t=I(['\n            <button type="button" class="btn btn-secondary" data-dismiss="modal">\n                Close\n            </button>\n        ']);return d=function(){return t},t}function l(){var t=I(['\n                            <div\n                                class="tab-pane fade','"\n                                id="tab-content-',"-",'"\n                                role="tabpanel"\n                                aria-labelledby="tab-',"-",'"\n                            >\n                                <div id="','-list" class="modules">\n                                    ',"\n                                </div>\n                            </div>\n                        "]);return l=function(){return t},t}function h(){var t=I(['\n                            <li class="nav-item">\n                                <a\n                                    class="nav-link','"\n                                    id="tab-',"-",'"\n                                    data-toggle="tab"\n                                    href="#tab-content-',"-",'"\n                                    role="tab"\n                                    aria-controls="home"\n                                    aria-selected="true"\n                                    >',"</a\n                                >\n                            </li>\n                        "]);return h=function(){return t},t}function f(){var t=I(['\n            <ul class="nav nav-pills" role="tablist">\n                ','\n            </ul>\n            <div class="tab-content pt-2">\n                ',"\n            </div>\n        "]);return f=function(){return t},t}function p(){var t=I(["\n                                <tr>\n                                    ","","\n                                </tr>\n                            "]);return p=function(){return t},t}function b(){var t=I(['\n            <table id="table-','-list" class="table table-sm small tablesort">\n                <thead>\n                    <tr>\n                        <th scope="col" class="text-right" rowspan="2" data-sort-default>Lb</th>\n\n                        ',"\n                    </tr>\n                    <tr>\n                        ","\n                    </tr>\n                </thead>\n                <tbody>\n                    ","\n                </tbody>\n            </table>\n        "]);return b=function(){return t},t}function m(){var t=I(['\n                            <td class="text-right" data-sort="','">\n                                ',"\n                            </td>\n                        "]);return m=function(){return t},t}function _(){var t=I(["\n            ","\n        "]);return _=function(){return t},t}function v(){var t=I(['\n                <th scope="row" class="text-right" data-sort="','">\n                    ',"\n                </th>\n            "]);return v=function(){return t},t}function g(){var t=I(["\n                    ","<br /><em>","</em>\n                "]);return g=function(){return t},t}function w(){var t=I(['\n                        <th class="text-right">',"</th>\n                    "]);return w=function(){return t},t}function j(){var t=I(["\n            ","\n        "]);return j=function(){return t},t}function y(){var t=I(['\n            <th scope="col" class="text-center" colspan="','">\n                ',"\n            </th>\n        "]);return y=function(){return t},t}function I(t,e){return e||(e=t.slice(0)),t.raw=e,t}function x(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){O(a,r,i,o,s,"next",t)}function s(t){O(a,r,i,o,s,"throw",t)}o(void 0)}))}}var D=function(){function e(){this._cannonData={},this._groups=new Map,this._baseName="List cannons",this._baseId="cannon-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._cannonTypes=["medium","long","carronade"],this._setupListener()}var a=e.prototype;return a._loadAndSetupData=function(){var t=S(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(3).then(n.t.bind(null,"Fre2",3));case 3:e=t.sent,r=e.default,this._setupData(r),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Object(u.J)(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),a._setupData=function(t){var e=this;t.long.forEach((function(t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=r[n],a=i[0],o=i[1];"name"!==a&&e._groups.set(a,{values:o,count:Object.entries(o).length})}}));var n=["name","damage","penetration (m)","dispersion","traverse","generic"];this._cannonTypes.forEach((function(r){e._cannonData[r]=t[r].map((function(t){return Object.keys(t).sort((function(t,e){return n.indexOf(t)-n.indexOf(e)})).reduce((function(e,n){return e[n]=t[n],e}),{})}))})),this._groups=new Map(x(this._groups.entries()).sort((function(t,e){return n.indexOf(t[0])-n.indexOf(e[0])})))},a._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=S(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(s.b)("Tools",t._baseName),r.stopPropagation(),t._cannonListSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},a._getList=function(t){return Object(r.d)(b(),t,Object(i.a)(this._groups,(function(t,e){return e}),(function(t){return function(t){return Object(r.d)(y(),t[1].count,Object(u.b)(t[0]))}(t)})),Object(i.a)(this._groups,(function(t,e){return e}),(function(t){return function(t){return Object(r.d)(j(),Object.entries(t[1].values).map((function(t){return Object(r.d)(w(),Object(u.b)(t[0]))})))}(t)})),Object(i.a)(this._cannonData[t],(function(t){return t.id}),(function(t){return Object(r.d)(p(),(e=t.name,n=e,(i=e.split(" (")).length>1&&(n=Object(r.d)(g(),i[0],i[1].replace(")",""))),Object(r.d)(v(),parseInt(e,10),n)),function(t){return Object(r.d)(_(),Object.entries(t).map((function(t){return"name"===t[0]?"":Object.entries(t[1]).map((function(t){return Object(r.d)(m(),t[1].value||0,t[1]?Object(u.t)(t[1].value,t[1].digits):"")}))})))}(t));var e,n,i})))},a._getModalBody=function(){var t=this;return Object(r.d)(f(),Object(i.a)(this._cannonTypes,(function(t){return t}),(function(e,n){return Object(r.d)(h(),0===n?" active":"",t._baseId,e,t._baseId,e,Object(u.b)(e))})),Object(i.a)(this._cannonTypes,(function(t){return t}),(function(e,n){return Object(r.d)(l(),0===n?" show active":"",t._baseId,e,t._baseId,e,e,t._getList(e))})))},a._getModalFooter=function(){return Object(r.d)(d())},a._injectModal=function(){Object(r.f)(Object(c.C)({id:this._modalId,title:this._baseName,body:this._getModalBody.bind(this),footer:this._getModalFooter}),document.getElementById("modal-section")),this._cannonTypes.forEach((function(t){var e=document.getElementById("table-"+t+"-list");new o.a(e)}))},a._initModal=function(){Object(c.A)(),this._injectModal()},a._cannonListSelected=function(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")},e}()}).call(this,n("xeH2"))},K8hv:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return d}));n("iPZ8"),n("kypl"),n("pCzD"),n("lYjL"),n("4owi"),n("/YXa"),n("8cZI"),n("lmye"),n("D/wG"),n("JBxO"),n("FdtR"),n("9UJh"),n("WoWj"),n("3dw1"),n("U00V"),n("wcNg"),n("3XUK"),n("Peo2"),n("/1Gu");var r=n("PVJp"),i=n("f4w0"),a=n("Av7d"),o=n("0lY5");function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){c(a,r,i,o,s,"next",t)}function s(t){c(a,r,i,o,s,"throw",t)}o(void 0)}))}}var d=function(){function e(){this._baseName="List recipe ingredients",this._baseId="ingredient-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}var c=e.prototype;return c._loadAndSetupData=function(){var t=u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(5).then(n.t.bind(null,"3KT9",3));case 3:return this._moduleData=t.sent.default,t.next=6,n.e(10).then(n.t.bind(null,"BUHQ",3));case 6:this._ingredientData=t.sent.default.ingredient,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Object(o.J)(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),c._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=u(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(i.b)("Tools",t._baseName),r.stopPropagation(),t._ingredientListSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},c._injectModal=function(){Object(a.B)(this._modalId,this._baseName),Object(r.a)("#"+this._modalId+" .modal-body").append("div").attr("id",""+this._baseId).attr("class","container-fluid")},c._initModal=function(){this._injectModal(),this._injectList()},c._ingredientListSelected=function(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")},c._getProperties=function(t){var e="",n="",r="";return this._moduleData.forEach((function(e){e[1].filter((function(e){return e.name===t})).forEach((function(t){n=e[0],r="<tr><td>"+t.properties.map((function(t){var e=t.isPercentage?Object(o.C)(t.amount/100):Object(o.B)(t.amount);return t.modifier+" "+e})).join("</td></tr><tr><td>")+"</td></tr>"}))})),e="<h6 class='text-muted text-left'>"+n+"</h6>",e+="<table class='table table-sm'><tbody>"+r+"</tbody></table>",r?e:""},c._getRows=function(){var t=this;return this._ingredientData.map((function(e){return"<tr><td>"+e.name+"</td><td>"+e.recipeNames.map((function(e){var n=t._getProperties(e);return n?'<a data-toggle="tooltip" title="'+n+'">'+e+"</a>":e})).join("<br>")+"</td></tr>"}))},c._getText=function(){var t=this._getRows(),e=Object(o.c)(t,2),n="";return s(new Array(e.length).keys()).forEach((function(t){n+='<div class="col-md-'+Math.floor(12/e.length)+'">',n+='<table class="table table-sm"><thead>',n+="<tr><th>Ingredient</th><th>Recipes</th></tr></thead><tbody>",n+=e[t].join(""),n+="</tbody></table></div>"})),n},c._injectList=function(){Object(r.a)("#"+this._baseId+" div").remove(),Object(r.a)("#"+this._baseId).append("div").classed("row ingredients",!0),Object(r.a)("#"+this._baseId+" div").html(this._getText()),t('[data-toggle="tooltip"]').tooltip({html:!0,placement:"auto",sanitize:!1})},e}()}).call(this,n("xeH2"))},MDkH:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return d}));n("iPZ8"),n("kypl"),n("pCzD"),n("IlJM"),n("4owi"),n("/YXa"),n("8cZI"),n("lmye"),n("D/wG"),n("1Qwx"),n("JBxO"),n("FdtR"),n("9UJh"),n("WoWj"),n("3dw1"),n("U00V"),n("wcNg"),n("3XUK"),n("Peo2");var r=n("PVJp"),i=n("f4w0"),a=n("Av7d"),o=n("0lY5");function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){c(a,r,i,o,s,"next",t)}function s(t){c(a,r,i,o,s,"throw",t)}o(void 0)}))}}var d=function(){function e(){this._baseName="List modules",this._baseId="module-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}var c=e.prototype;return c._loadAndSetupData=function(){var t=u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(5).then(n.t.bind(null,"3KT9",3));case 3:this._moduleData=t.sent.default,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Object(o.J)(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),c._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=u(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(i.b)("Tools",t._baseName),r.stopPropagation(),t._moduleListSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},c._injectModal=function(){Object(a.B)(this._modalId,this._baseName);var t=this._baseId+"-select",e=Object(r.a)("#"+this._modalId+" .modal-body");e.append("label").attr("for",t),e.append("select").attr("name",t).attr("id",t),e.append("div").attr("id",""+this._baseId).attr("class","container-fluid")},c._getOptions=function(){return""+this._moduleData.map((function(t){return'<option value="'+t[0]+'"">'+t[0]+"</option>;"})).join("")},c._setupSelect=function(){var e=t("#"+this._baseId+"-select"),n=this._getOptions();e.append(n)},c._setupSelectListener=function(){var e=this;t("#"+this._baseId+"-select").addClass("selectpicker").on("change",(function(t){return e._moduleSelected(t)})).selectpicker({noneSelectedText:"Select module category"}).val("default").selectpicker("refresh")},c._initModal=function(){this._injectModal(),this._setupSelect(),this._setupSelectListener()},c._moduleListSelected=function(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")},c._getRows=function(t){var e=new Map([["L",Object(o.D)(1)+" – "+Object(o.D)(3)],["M",Object(o.D)(4)+" – "+Object(o.D)(5)],["S",Object(o.D)(6)+" – "+Object(o.D)(7)]]);function n(t){return"U"===t?"":" "+e.get(t)}var r="",i=[];return this._moduleData.forEach((function(e){e[0]===t&&e[1].forEach((function(t,a){var s=function(n){return n<e[1].length&&t.name===e[1][n].name&&JSON.stringify(t.properties)===JSON.stringify(e[1][n].properties)};r=n(t.moduleLevel),s(a+1)&&(e[1][a+1].hasSamePropertiesAsPrevious=!0,r+="<br>"+n(e[1][a+1].moduleLevel)),s(a+2)&&(e[1][a+2].hasSamePropertiesAsPrevious=!0,r="");var c=r?"<br>":"";c+=t.permanentType?t.permanentType:"",void 0!==t.hasSamePropertiesAsPrevious&&t.hasSamePropertiesAsPrevious||i.push('<tr><td><span class="name">'+t.name+"<br>"+r+"</span>"+c+"</td><td>"+t.properties.map((function(t){var e=t.isPercentage?Object(o.C)(t.amount/100):t.amount<1&&t.amount>0?Object(o.w)(t.amount):Object(o.B)(t.amount);return t.modifier+" "+e})).join("<br>")+"</td></tr>")}))})),i},c._getText=function(t){var e=this._getRows(t),n=Object(o.c)(e,3),r="";return s(new Array(n.length).keys()).forEach((function(t){r+='<div class="col-md-'+Math.floor(12/n.length)+'">',r+='<table class="table table-sm small"><thead>',r+="<tr><th>Module</th><th>Modifier</th></tr></thead><tbody>",r+=n[t].join(""),r+="</tbody></table></div>"})),r},c._moduleSelected=function(e){var n=t(e.currentTarget).find(":selected").val();Object(r.a)("#"+this._baseId+" div").remove(),Object(r.a)("#"+this._baseId).append("div").classed("row modules mt-4",!0),Object(r.a)("#"+this._baseId+" div").html(this._getText(n))},e}()}).call(this,n("xeH2"))},ZQSh:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));n("lYjL"),n("IlJM"),n("8cZI"),n("lmye"),n("D/wG"),n("JBxO"),n("FdtR"),n("3dw1"),n("wcNg"),n("3XUK"),n("Peo2");var r=n("PVJp"),i=n("f4w0"),a=n("Av7d"),o=n("0lY5");function s(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){s(a,r,i,o,c,"next",t)}function c(t){s(a,r,i,o,c,"throw",t)}o(void 0)}))}}var u=function(){function e(){this._baseName="List buildings",this._baseId="building-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}var s=e.prototype;return s._loadAndSetupData=function(){var t=c(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(2).then(n.t.bind(null,"VNgs",3));case 3:this._buildingData=t.sent.default,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Object(o.J)(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),s._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=c(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(i.b)("Tools",t._baseName),r.stopPropagation(),t._buildingListSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},s._injectModal=function(){Object(a.B)(this._modalId,this._baseName);var t=this._baseId+"-select",e=Object(r.a)("#"+this._modalId+" .modal-body");e.append("label").attr("for",t),e.append("select").attr("name",t).attr("id",t),e.append("div").attr("id",""+this._baseId).attr("class","container-fluid")},s._getOptions=function(){return""+this._buildingData.map((function(t){return'<option value="'+t.name+'">'+t.name+"</option>;"})).join("")},s._setupSelect=function(){var e=t("#"+this._baseId+"-select"),n=this._getOptions();e.append(n)},s._setupSelectListener=function(){var e=this;t("#"+this._baseId+"-select").addClass("selectpicker").on("change",(function(t){return e._buildingSelected(t)})).selectpicker({noneSelectedText:"Select building"}).val("default").selectpicker("refresh")},s._initModal=function(){this._injectModal(),this._setupSelect(),this._setupSelectListener()},s._buildingListSelected=function(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")},s._getBuildingData=function(t){return this._buildingData.filter((function(e){return e.name===t}))[0]},s._getProductText=function(t){var e="";return Array.isArray(t.resource)?(e+='<table class="table table-sm"><tbody>',e+="<tr><td>"+t.resource.map((function(t){return t.name})).join("</td></tr><tr><td>")+"</td></tr>",e+="</tbody></table>"):(e+='<h5 class="card-title">'+t.resource.name+"</h5>",t.resource.price&&(e+='<table class="table table-sm card-table"><tbody>',e+="<tr><td>"+Object(a.t)(t.resource.price)+" per unit</td></tr>",t.batch&&(e+="<tr><td>"+t.batch.labour+" labour hour"+(t.batch.labour>1?"s":"")+" per unit</td></tr>"),e+="</tbody></table>")),e},s._getRequirementText=function(t){var e="";return e+='<table class="table table-sm card-table"><thead>',t.levels[0].materials.length?(e+="<tr><th>Level</th><th>Level build materials</th><th>Build price (reals)</th></tr>",e+="</thead><tbody>",t.levels.forEach((function(t,n){e+="<tr><td>"+(n+1)+'</td><td class="text-left">',e+=t.materials.map((function(t){return Object(o.u)(t.amount)+" "+t.item})).join("<br>"),e+="</td>",e+="<td>"+Object(o.u)(t.price)+"</td>",e+="</tr>"}))):(e+="<tr><th>Level</th><th>Production</th><th>Labour cost (%)</th><th>Storage</th><th>Build price (reals)</th></tr>",e+="</thead><tbody>",t.levels.forEach((function(t,n){e+="<tr><td>"+(n+1)+"</td><td>"+Object(o.u)(t.production)+"</td><td>"+Object(o.u)(-100*t.labourDiscount)+"</td><td>"+Object(o.u)(t.maxStorage)+"</td><td>"+Object(o.u)(t.price)+"</td></tr>"}))),e+="</tbody></table>"},s._getText=function(t){var e=this._getBuildingData(t),n='<div class="row no-gutters card-deck">';return n+='<div class="card col-5"><div class="card-header">Product</div>',n+='<div class="card-body product">',n+=this._getProductText(e),n+="</div></div>",n+='<div class="card col-7"><div class="card-header">Requirements</div>',n+='<div class="card-body px-0 requirements">',n+=this._getRequirementText(e),n+="</div></div>",n+="</div>"},s._buildingSelected=function(e){var n=t(e.currentTarget).find(":selected").val();Object(r.a)("#"+this._baseId+" div").remove(),Object(r.a)("#"+this._baseId).append("div").classed("buildings mt-4",!0),Object(r.a)("#"+this._baseId+" div").html(this._getText(n))},e}()}).call(this,n("xeH2"))},alIf:function(t,e,n){"use strict";n.r(e),n.d(e,"init",(function(){return g}));n("3XUK"),n("Peo2");var r=n("aMlc"),i=n.n(r),a=n("f4w0"),o=n("Av7d"),s=n("iSiJ"),c=n("pFgi"),u=n("ZQSh"),d=n("GmlK"),l=n("K8hv"),h=n("FCTg"),f=n("MDkH"),p=n("Cybf"),b=n("FhzS"),m=n("2k6a"),_=n("lhE0"),v=n("wNe0"),g=function(t,e){var n=new s.a("ship-compare");e.has("cmp")&&e.has("v")&&i.a.lte(e.get("v"),o.d)&&(Object(a.b)("Menu","Paste ship compare"),n.initFromClipboard(e));new c.a("wood"),new v.a,new d.a,new p.a,new h.a,new f.a,new m.a(t),new _.a,new l.a,new u.a,new b.a}},lhE0:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return l}));n("lYjL"),n("D/wG"),n("fp7Y"),n("SQIU"),n("JBxO"),n("FdtR"),n("Muwe"),n("w13K"),n("y89P"),n("MTDe"),n("3dw1"),n("wcNg"),n("3XUK"),n("Peo2");var r=n("PVJp"),i=n("x4fR"),a=n.n(i),o=n("f4w0"),s=n("Av7d"),c=n("0lY5");function u(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){u(a,r,i,o,s,"next",t)}function s(t){u(a,r,i,o,s,"throw",t)}o(void 0)}))}}var l=function(){function e(){this._baseName="List ships",this._baseId="ship-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}var i=e.prototype;return i._loadAndSetupData=function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(12).then(n.t.bind(null,"wtJ6",3));case 3:this._shipData=t.sent.default,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Object(c.J)(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),i._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=d(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(o.b)("Tools",t._baseName),r.stopPropagation(),t._shipListSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},i._injectModal=function(){Object(s.B)(this._modalId,this._baseName,"lg"),Object(r.a)("#"+this._modalId+" .modal-body").append("div").attr("id",""+this._baseId).attr("class","container-fluid")},i._initTablesort=function(){var t=function(t){return t.replace(/[^\-?0-9.]/g,"")};a.a.extend("number",(function(t){return t.match(/^[-+]?[£\u0024Û¢´€]?\d+\s*([,.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,.]\d{0,2})?[£\u0024Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,.])?-?(\d)+([E,e][-+][\d]+)?%?$/)}),(function(e,n){var r=t(e);return function(t,e){var n=parseFloat(t),r=parseFloat(e);return(n=Number.isNaN(n)?0:n)-(r=Number.isNaN(r)?0:r)}(t(n),r)}))},i._initModal=function(){this._initTablesort(),this._injectModal(),this._injectList()},i._shipListSelected=function(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")},i._injectList=function(){Object(r.a)("#"+this._baseId+" div").remove(),Object(r.a)("#"+this._baseId).append("div").classed("row ingredients",!0),Object(r.a)("#"+this._baseId+" div").html(this._getList());var t=document.getElementById("table-"+this._baseId);new a.a(t)},i._getList=function(){var t="";return t+='<table id="table-'+this._baseId+'" class="table table-sm small tablesort"><thead>',t+="<tr>",t+='<th scope="col" class="text-right" rowspan="2">Class</th>',t+='<th scope="col" rowspan="2">Name</th>',t+='<th scope="col" class="text-right" rowspan="2">Guns</th>',t+='<th scope="col" class="text-right" rowspan="2">Battle<br>rating</th>',t+='<th scope="col" class="text-right" rowspan="2">Crew</th>',t+='<th scope="col" class="text-center" colspan="2">Speed</th>',t+='<th scope="col" class="text-right" rowspan="2">Broadside</th>',t+='<th scope="col" class="text-center" colspan="2">Chasers</th>',t+='<th scope="col" class="text-right" rowspan="2">Sides</th>',t+="</tr>",t+="<tr>",t+='<th scope="col" class="text-right">Maximum</th>',t+='<th scope="col" class="text-right">Turn</th>',t+='<th scope="col" class="text-right">Bow</th>',t+='<th scope="col" class="text-right">Stern</th>',t+="</tr></thead><tbody>",this._shipData.filter((function(t){return!t.name.startsWith("Rookie ")})).sort(Object(c.M)(["class","-battleRating","name"])).forEach((function(e){t+="<tr>",t+='<td class="text-right">'+e.class+"</td>",t+="<td>"+e.name+"</td>",t+='<td class="text-right">'+e.guns+"</td>",t+='<td class="text-right">'+e.battleRating+"</td>",t+='<td class="text-right">'+e.crew.max+"</td>",t+='<td class="text-right">'+Object(c.s)(e.ship.maxSpeed)+"</td>",t+='<td class="text-right">'+Object(c.s)(e.rudder.turnSpeed)+"</td>",t+='<td class="text-right">'+e.broadside.cannons+"</td>",t+='<td class="text-right">'+(e.gunsPerDeck[4]?e.gunsPerDeck[4]:"")+"</td>",t+='<td class="text-right">'+(e.gunsPerDeck[5]?e.gunsPerDeck[5]:"")+"</td>",t+='<td class="text-right" data-sort="'+e.sides.armour+'">'+Object(c.u)(e.sides.armour)+" ("+e.sides.thickness+")</td>",t+="</tr>"})),t+="</tbody></table>"},e}()}).call(this,n("xeH2"))},wNe0:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return h}));n("iPZ8"),n("kypl"),n("pCzD"),n("lYjL"),n("4owi"),n("/YXa"),n("lmye"),n("D/wG"),n("fp7Y"),n("SQIU"),n("JBxO"),n("FdtR"),n("Muwe"),n("9UJh"),n("RsMT"),n("WoWj"),n("w13K"),n("y89P"),n("3dw1"),n("U00V"),n("wcNg"),n("3XUK"),n("Peo2");var r=n("PVJp"),i=n("x4fR"),a=n.n(i),o=n("f4w0"),s=n("Av7d"),c=n("0lY5");function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){d(a,r,i,o,s,"next",t)}function s(t){d(a,r,i,o,s,"throw",t)}o(void 0)}))}}var h=function(){function e(){this._baseName="List woods",this._baseId="wood-list",this._buttonId="button-"+this._baseId,this._modalId="modal-"+this._baseId,this._setupListener()}var i=e.prototype;return i._loadAndSetupData=function(){var t=l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(13).then(n.t.bind(null,"c8Sa",3));case 3:this._woodData=t.sent.default,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Object(c.J)(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),i._setupListener=function(){var t=this,e=!0;document.getElementById(this._buttonId).addEventListener("click",function(){var n=l(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return e=!1,n.next=4,t._loadAndSetupData();case 4:Object(o.b)("Tools",t._baseName),r.stopPropagation(),t._woodListSelected();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},i._injectModal=function(){Object(s.B)(this._modalId,this._baseName);var t=Object(r.a)("#"+this._modalId+" .modal-body");t.append("h5").text("Frames"),t.append("div").attr("id","frame-list").attr("class","modules"),t.append("h5").text("Trims"),t.append("div").attr("id","trim-list").attr("class","modules")},i._initTablesort=function(){var t=function(t){return t.replace(/[^\-?0-9.]/g,"")};a.a.extend("number",(function(t){return t.match(/^[-+]?[£\u0024Û¢´€]?\d+\s*([,.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,.]\d{0,2})?[£\u0024Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,.])?-?(\d)+([E,e][-+][\d]+)?%?$/)}),(function(e,n){var r=t(e);return function(t,e){var n=parseFloat(t),r=parseFloat(e);return(n=Number.isNaN(n)?0:n)-(r=Number.isNaN(r)?0:r)}(t(n),r)}))},i._initModal=function(){this._initTablesort(),this._injectModal(),this._injectList("frame"),this._injectList("trim")},i._woodListSelected=function(){document.getElementById(this._modalId)||this._initModal(),t("#"+this._modalId).modal("show")},i._injectList=function(e){t("#"+e+"-list").append(this._getList(e));var n=document.getElementById("table-"+e+"-list");new a.a(n)},i._getModifiers=function(t){var e=new Set;return this._woodData[t].forEach((function(t){t.properties.forEach((function(t){"Ship material"!==t.modifier&&"Boarding morale"!==t.modifier&&e.add(t.modifier)}))})),u(e).sort()},i._getList=function(t){var e=this._getModifiers(t),n="";return n+='<table id="table-'+t+'-list" class="table table-sm small tablesort"><thead><tr><th data-sort-default>Wood</thdata-sort-default>',e.forEach((function(t){n+="<th>"+t+"</th>"})),n+="</tr></thead><tbody>",this._woodData[t].forEach((function(t){n+="<tr><td>"+t.name+"</td>",e.forEach((function(e){var r=t.properties.filter((function(t){return t.modifier===e})).map((function(t){return t.amount}))[0];n+='<td class="text-right" data-sort="'+(r||0)+'">'+(r?Object(c.s)(r):"")+"</td>"})),n+="</tr>"})),n+="</tbody></table>"},e}()}).call(this,n("xeH2"))}}]);