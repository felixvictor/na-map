/*
 * scss definitions: display
 *
 * @author    Ingo Beyritz
 * @copyright Copyright (c) 2017, Ingo Beyritz
 * @license   http://www.gnu.org/licenses/gpl.html
 */

$background-colour: $primary-500;

#na-svg {
    background-color: $background-colour;
}

// min-width to allow proper calculation of the ".navbar" height for margin.top even if the window is small
select {
    min-width: 15em;
}

// port icons (available to nation)
pattern .nation {
    fill: $primary-500;
    fill-opacity: 0.3;
}

// port icons (available to all)
pattern .all {
    fill: $primary-200;
    fill-opacity: 0.8;
}

.axis {
    line {
        stroke: $primary-600;
        opacity: 0.5;
    }
    text {
        fill: $primary-700;
    }
}

table tr,
p {
    text-align: left;
}

.table-sm th {
    padding-top: 1rem;
    padding-bottom: 1rem;
}

.table {
    thead th {
        font-weight: normal;
    }
    td {
        vertical-align: top;
        border-top: none;
    }
}

.modules,
.buildings {
    table {
        thead {
            background-color: $secondary-200;
        }
        td {
            padding-top: 0.6rem;
            padding-bottom: 0.6rem;
        }
        tbody tr:nth-of-type(odd) {
            background-color: $primary-300;
        }
        tbody tr:nth-of-type(even) {
            background-color: $primary-100;
        }
        .name {
            font-style: italic;
        }
    }
}

.buildings {
    table {
        width: auto;
        th,
        td {
            padding-right: 1rem;
        }
        td {
            text-align: right;
        }
    }
}

.wood {
    td + td {
        text-align: right;
    }
    tbody {
        td:nth-child(1) {
            width: 50%;
        }
        td:nth-child(2) {
            width: 50%;
        }
    }
}

.ship tbody {
    td:nth-child(1) {
        width: 36%;
    }
    td:nth-child(2) {
        width: 32%;
    }
    td:nth-child(3) {
        width: 32%;
    }
}

.bubble {
    fill-opacity: 0.5;
}

.pos {
    fill: $green;
}

.neg {
    fill: $red;
}

.gun-decks {
    height: 83px;
}

.badge {
    display: inline;
}

.des {
    position: relative;
    top: -0.4em;
    font-size: xx-small !important;
    color: $primary-700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.mm {
    color: $red;
}

.pp {
    color: $green;
}

.compass-arc path {
    stroke: $primary-500;
}

.profile {
    path.base {
        opacity: 0.4;
        fill: $primary-600;
    }

    path.comp,
    circle.comp {
        opacity: 0.4;
        fill: $secondary-600;
    }
}

.columnA {
    background-color: $primary-100;
    table {
        thead {
            background-color: $primary-050;
        }
        th {
            border-top: none;
        }
        tbody tr:nth-of-type(odd) {
            background-color: $primary-200;
        }
    }
}

.columnC {
    background-color: $secondary-100;
    table {
        thead {
            background-color: $secondary-050;
        }
        th {
            border-top: none;
        }
        tbody tr:nth-of-type(odd) {
            background-color: $secondary-200;
        }
    }
}

.knots-circle {
    fill: none;
    stroke: $primary-500;
}

.knots-text {
    fill: $primary-600 !important;
}

.solidArc {
    transition: all 0.3s;
    &:hover {
        fill: orangered;
    }
}

.aster-score {
    line-height: 1em;
    text-anchor: middle;
    dominant-baseline: central;
}

.outlineArc {
    fill: none;
    stroke: $primary-200;
}

text {
    fill: $primary-900;
    pointer-events: none;
}

.profile {
    text {
        fill: $primary-900;
        text-anchor: middle;
    }
}

#input-toggle {
    display: flex;
    .item {
        padding-right: 1em;
    }
}

.extralarge-width {
    min-width: 25em;
}

.large-width {
    min-width: 18em;
}

.left-margin {
    margin-left: 15px;
}

.btn-outline-primary {
    color: $primary-600;
}

.btn-outline-secondary {
    color: $secondary-600;
}

.box {
    background-color: $primary-100;
}

.compass {
    opacity: 0.8;
}

.port-name {
    font-size: large;
    font-style: italic;
}

.port circle {
    cursor: pointer;
}

.non-trading {
    font-style: italic;
}

.pb-zone {
    fill: none;
    stroke: $primary-700;
}

.fort {
    fill: $red;
    opacity: 0.8;
}

.tower {
    fill: $secondary-800;
    opacity: 0.7;
}

.label-rect {
    fill: transparent;
}

.voronoi {
    fill: transparent;
    stroke: $primary-700;
    stroke-width: 0.5px;
    path {
        pointer-events: visibleFill;
    }
}

.highlight-voronoi {
    fill: $primary-400;
    fill-opacity: 0.5;
}

.f11,
.coord,
.summary,
.grid-background {
    line-height: 1;
    background-color: transparent;
    circle {
        fill: $secondary-700;
        fill-opacity: 0.5;
    }
    text {
        font-size: 1em;
        fill: $secondary-800;
        text-anchor: middle;
        dominant-baseline: central;
        &.des {
            fill: $secondary-700 !important;
        }
    }
    rect {
        fill: $primary-100;
        fill-opacity: 0.7;
    }
    path {
        stroke: $secondary-600;
        stroke-width: 0.3em;
        fill: none;
    }
}

.f11 {
    text {
        text-anchor: end;
    }
}

.coord {
    text {
        text-anchor: start;
    }
}

.grid-background {
    rect {
        fill: $primary-200;
        fill-opacity: 0.7;
    }
}

.summary text {
    text-anchor: start;
}

.course-head {
    fill: $secondary-600 !important;
}

.wind-head {
    fill: $primary-900 !important;
}

.wind {
    stroke: $primary-900 !important;
}

.wind,
.wind-text {
    font-size: 1.2em !important;
    text-anchor: middle !important;
}

.wind-text-current {
    font-size: 1em !important;
    text-anchor: middle !important;
}

.rs-tooltip-text {
    font-family: inherit;
    font-size: 1.8em;
    color: $primary-700;
}

.rs-handle {
    position: relative;
    width: 48px !important;
    background: $primary-900;
    border: 3px solid $primary-400;
    border-radius: 0;
    &::after,
    &::before {
        position: absolute;
        top: 50%;
        left: 100%;
        width: 0;
        height: 0;
        pointer-events: none;
        content: " ";
        border: solid transparent;
    }

    &::after {
        margin-top: -20px;
        border-width: 20px;
        border-left-color: $primary-900;
    }

    &::before {
        margin-top: -24px;
        border-width: 24px;
        border-left-color: $primary-400;
    }
}

.rs-control .rs-path-color {
    background-color: $primary-200;
}

.rs-control .rs-handle {
    background-color: $primary-900;
}

.rs-border {
    border-color: $primary-400;
}

.tooltip {
    font-size: smaller;
    text-align: left;
    box-shadow: 0 14px 28px rgba($primary-900, 0.25), 0 10px 10px rgba($primary-900, 0.22);
    table {
        margin-bottom: 0;
    }
}

.tooltip-inner {
    min-width: 30rem;
}

.flag-icon {
    display: inline-block;
    width: 2rem;
    margin-right: 0.4rem;
    background-repeat: no-repeat;
    background-size: contain;

    &::before {
        content: "\00a0";
    }
}

.dummy-svg {
    background-image: url("~Icons/compass.svg");
}

$flags-dir: "~Icons";
$flags: "NT", "PR", "ES", "FR", "GB", "VP", "DK", "SE", "US", "FT", "RU", "DE", "PL";

@mixin flags {
    @each $flag in $flags {
        .flag-icon.#{$flag} {
            background-image: url("#{$flags-dir}/#{$flag}.svg");
        }
    }
}

@include flags;

//////////////////////////////////////////
// contrast function
// https://lnikki.la/articles/sass-better-colour-based-on-brightness/

@function contrast-luma($c) {
    $-local-red: red(rgba($c, 1));
    $-local-green: green(rgba($c, 1));
    $-local-blue: blue(rgba($c, 1));

    @return (0.2126 * $-local-red + 0.7152 * $-local-green + 0.0722 * $-local-blue) / 255;
}

@function contrast-color($bg, $c1: $white, $c2: $primary-900) {
    $bg-luma: contrast-luma($bg);
    $c1-luma: contrast-luma($c1);
    $c2-luma: contrast-luma($c2);

    $c1-diff: abs($bg-luma - $c1-luma);
    $c2-diff: abs($bg-luma - $c2-luma);

    @if $c1-diff > $c2-diff {
        @return $c1;
    } @else {
        @return $c2;
    }
}

@mixin colour($colour) {
    color: contrast-color($colour);
    background-color: $colour;
}

.rate {
    display: flex;

    .bar {
        position: relative;
        top: 0;
        float: left;
        height: 1.618rem;
    }

    .basis {
        @include colour($primary-600);
    }

    .pos {
        @include colour($green);
    }

    .neg {
        @include colour($red);
    }

    .diff {
        opacity: 0.4;
    }
}

.county text,
.region text {
    font-family: LibreCaslonDisplay, -apple-system, blinkmacsystemfont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
        cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", arial, sans-serif;
    fill: $white;
    opacity: 0.7;
    text-anchor: middle;
}

.region text {
    font-size: 240px;
}

.county text {
    font-size: 84px;
}

// https://stackoverflow.com/questions/44467377/bootstrap-4-multilevel-dropdown-inside-navigation/48953349#48953349
.dropdown-submenu {
    position: relative;
}

.dropdown-submenu .dropdown-menu {
    top: 0;
    left: 100%;
    margin-top: -1px;
}
